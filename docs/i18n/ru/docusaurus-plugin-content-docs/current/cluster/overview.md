---
title: Кластер Solana
---

Solana - это набор валидаторов, работающих вместе для обслуживания клиентских транзакций и поддержания целостности бухгалтерской книги. Можете сосуществовать много кластеров. Когда два кластера имеют общий генезис, они пытаются конвертироваться. В противном случае они просто игнорируют существование другого. Транзакции, отправленные неправильно, не учитываются. В этом разделе мы обсудим, как создается кластер, как узлы присоединяются к кластеру, как они делятся книгой, как они обеспечивают их репликации, и как они справляются с ошибками и вредоносными узлами.

## Создание кластера

Перед запуском валидаторов сначала нужно создать конфигурацию генеза __. Конфигурация ссылается на два публичных ключа, _мята_ и _валидатор загрузок_. Валидатор, содержащий приватный ключ проверки начальной загрузки, отвечает за добавление первых записей в книгу. Он инициализирует свое внутреннее состояние с учетной записью mint. Эта учетная запись будет содержать количество нативных токенов, определенных конфигурацией genesis. Второй валидатор затем связывается с валидатором начальной загрузки, чтобы зарегистрироваться как _валидатор_. Затем дополнительные валидаторы регистрируются в любом зарегистрированном члене кластера.

Валидатор получает все записи от лидера и подает голоса, подтверждающие правильность этих записей. После голосования ожидается сохранение этих записей. После того, как валидатор обнаружил достаточное количество копий, он удаляет свою копию.

## Создание кластера

Валидаторы вводят кластер через регистрационные сообщения, отправленные на его _контрольную плоскость_. Самолет управления реализован с использованием протокола _сплетения_,, что узел может зарегистрироваться с любым существующим узлом, и ожидать, что его регистрация будет распространяться на все узлы кластера. Время синхронизации всех узлов пропорционально квадрату количества узлов, участвующих в кластере. Алгоритмически, считается, что это очень медленно, но в обмен на это время, узел уверен, что в конце концов он имеет ту же информацию, что и все другие узлы, и что эта информация не может быть цензурой ни одного узла.

## Отправка транзакций кластеру

Клиенты отправляют транзакции любому устройству обработки транзакций \(TPU\) порту. Если узел входит в роль валидатора, он передает транзакцию назначенному лидеру. Если в роли лидера, узел объединяет входящие транзакции, то время метки времени они создают _запись_, и перемещает их на _плоскость данных кластера_. После того, как в панели данных транзакции проверяются узлами валидатора, эффективно прикладывая их к бухгалтерской книге.

## Подтверждение транзакций

Кластер Solana способен получить подсекунду _подтверждения_ для до 150 узлов с планом масштабирования до сотен тысяч узлов. После полного выполнения, время подтверждения, как ожидается, увеличится только с логарифмом числа валидаторов, где база логарифма очень высока. Если база составляет одну тысячу, например, это означает, что для первых тысяч узлов, подтверждение будет длительностью три сетевых прыжков плюс время, которое занимает самый медленный валидатор супербольшинства для голосования. Для следующих миллионов узлов, подтверждение увеличивается только на одну сеть прыжков.

Solana определяет подтверждение как длительность времени, когда лидер временной метки занимает новое место в момент, когда он признает чрезмерное большинство голосов.

Сеть Gossip слишком медленная, чтобы получить субсекундное подтверждение после того, как сеть выросла за определенный размер. Время отправки сообщений всем узлам пропорционально квадрату количества узлов. Если блокчейн пытается достичь низкого уровня подтверждения и пытается сделать это с помощью сети сплетни, он будет вынужден централизовать только небольшое количество узлов.

Масштабируемое подтверждение может быть достигнуто с помощью следующей комбинации методов:

1. Временная метка с образцом VDF и подписью отметки времени.
2. Разделить транзакции на пакеты, отправить каждый в отдельные узлы и иметь

   каждый узел делится партией со своими соседями.

3. Повторять предыдущий шаг рекурсивно до тех пор, пока все узлы не будут иметь все партии.

Solana поворачивает лидеров с фиксированными интервалами, называемыми _слоты_. Каждый лидер может производить записи только во время его выделенного слота. Следовательно, лидер временных меток транзакций, с тем чтобы валидаторы могли искать открытые ключи назначенного лидера. Затем лидер подписывает временную метку, с тем чтобы валидатор мог проверить подпись, если подпись является владельцем открытого ключа назначенного руководителя.

Далее транзакции разбиваются на пакеты, с тем чтобы узел мог отправлять транзакции нескольким сторонам, не делая нескольких копий. Если, например, лидеру необходимо отправить 60 транзакций на 6 узлов, это нарушит эту коллекцию из 60 партий из 10 транзакций и пошлите по одному на каждый узел. Это позволяет лидеру помещать 60 транзакций по проводу, а не 60 транзакций для каждого узла. Затем каждый узел делится партией со своими соседями. После того, как узел собрал все 6 партий, он восстанавливает первоначальный набор из 60 транзакций.

Партия транзакций может быть разделена только столько раз, прежде чем она настолько мала, что информация заголовка становится основным потребителем пропускной способности сети. На момент написания этого документа этот подход значительно расширяется до 150 валидаторов. Масштабировать до сотен тысяч валидаторов, каждый узел может применить ту же технику, что и узел лидера к другому набору узлов одинакового размера. Мы называем технику [_Turbine Block Propogation_](turbine-block-propagation.md).
