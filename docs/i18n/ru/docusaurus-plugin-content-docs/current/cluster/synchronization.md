---
title: Синхронизация
---

Быстрая, надежная синхронизация - самая большая причина, по которой Solana может достичь такой высокой пропускной способности. Традиционные блокчейны синхронизируются на больших кусках транзакций, называемых блоками. Синхронизируя блоки, транзакция не может быть обработана до истечения времени, называемого "время блокировки". В целях обеспечения работы консенсус время блоков должно быть очень большим \(~10 минут\), чтобы свести к минимуму шансы нескольких валидаторов одновременно, создавая новый действующий блок. В Proof of Stake не существует такого ограничения, но без надежных временных меток, валидатор не может определить порядок входящих блоков. Популярным обходом является пометка каждого блока таймером [с меткой времени](https://en.bitcoin.it/wiki/Block_timestamp). Из-за дрейфа часов и расхождения в сетевых задержках, метка времени является точной только в течение часа или два. Чтобы обойти обход обхода, эти системы удлиняют время блоков, чтобы обеспечить разумную уверенность в том, что медианная временная метка на каждом блоке всегда возрастает.

Solana придерживается очень другого подхода, который называет _Proof of History_ или _PoH_. Блоки Лидера "timestamp" с криптографическими доказательствами, что определенная длительность времени прошло с момента последнего доказательства. Все данные, хэшированные в доказательство, скорее всего, имели место до того, как были сгенерированы доказательства. Затем узел делится новым блоком с узлами валидатора, которые могут проверить эти доказательства. Блоки могут приходить к валидаторам в любом порядке или даже воспроизводиться спустя несколько лет. С такими надежными гарантиями синхронизации Solana может разбить блоки на меньшие партии транзакций _записей_. Записи направляются на проверки в реальном времени до любого понятия блокирующего консенсуса.

Технически Solana никогда не отправляет блок \_*, но использует термин для описания последовательности записей, по которым участники голосования проголосовали за *подтверждение\_. Таким образом, время подтверждения Solana можно сравнить с яблоками яблочных систем. Текущая реализация устанавливает время блока до 800 мс.

Что происходит под капюшоном, что записи передаются в валидаторы так быстро, как лидер узла может поставить набор допустимых транзакций в запись. Валидаторы обрабатывают эти записи задолго до того, как пришло время проголосовать за их действительность. При оптимизации обработки транзакций, нет никакой задержки между получением последнего элемента и временем, когда узел может голосовать. Если консенсус \*\* \*\* не достигнут, узел просто откатывает свое состояние. Эта техника оптимической обработки была введена в 1981 году и названа [оптимистическим контролем конверсии](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.65.4735). Он может быть применен к архитектуре блокчейна, где кластер голосует за хэш, представляющий полную бухгалтерскую книгу до _некоторой высоты блока_. В Solana он реализуется тривиально с помощью последней записи в PoH хэш.

## Взаимосвязь с VDF

Подтверждение техники истории было впервые описано для использования в блокчейне Solana в ноябре 2017 года. В июне следующего года аналогичная техника была описана в Стэнфорде и названа [проверяемой функцией задержки](https://eprint.iacr.org/2018/601.pdf) или _VDF_.

Желаемая собственность VDF заключается в том, что время проверки очень быстро. Подход Solana к проверке ее функции задержки пропорционален времени ее создания. Разделите на 4000 ядра GPU достаточно быстро для нужд Solana, но если вы спросите авторов упомянутой выше бумаги, они могут сказать вам \([и](https://github.com/solana-labs/solana/issues/388)\), что подход Solana является алгоритмически медленным и не следует называть VDF. Мы выступаем за то, чтобы термин VDF представлял категорию поддающихся проверке функций задержки, а не только подмножество с определенными характеристиками производительности. До тех пор, пока это не будет решено, Solana, вероятно, продолжит использовать термин PoH для своего VDF для конкретных приложений.

Другая разница между PoH и VDF заключается в том, что VDF используется только для отслеживания продолжительности. Хэш-цепочка PoH, с другой стороны, включает в себя хэши любых данных, которые были получены приложением. Эти данные являются двойным мечом. С одной стороны, данные "доказывают историю" - что данные, безусловно, существовали до хэшей после них. С другой стороны, это означает, что приложение может манипулировать хэш-цепями, меняя _, когда_ данные хэшируются. Таким образом, цепочка PoH не служит хорошим источником случайности, в то время как VDF без этих данных могут быть использованы. Solana [алгоритм вращения](synchronization.md#leader-rotation), например, основывается только на VDF _высоте_ и не на его хэше на этой высоте.

## Взаимосвязь с механизмами консенсуса

Proof of History не является механизмом консенсуса, однако оно используется для повышения эффективности работы Proof of Stake Solana в отношении цензуры консенсуса. Он также используется для улучшения работы протоколов плоскости данных.

## Подробнее о Proof of History

- [аналог водных часов](https://medium.com/solana-labs/proof-of-history-explained-by-a-water-clock-e682183417b8)
- [Обзор Proof of History](https://medium.com/solana-labs/proof-of-history-a-clock-for-blockchain-cf47a61a9274)
