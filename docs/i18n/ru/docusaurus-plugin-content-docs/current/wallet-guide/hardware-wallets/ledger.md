---
title: Ledger Nano
---

На этой странице описано, как использовать Ledger Nano S или Nano X для работы с Solana в командной строке. О других способах работы с кошельком Nano в Solana можно узнать [здесь](../ledger-live.md#interact-with-the-solana-network).

## Прежде чем начать

- [Настройте Nano на работу с приложением Solana](../ledger-live.md)
- [Установите утилиты командной строки Solana](../../cli/install-solana-cli-tools.md)

## Использование Ledger Nano в командной строке Solana

1. Убедитесь, что приложение Ledger Live закрыто
2. Вставьте ваше устройство Nano в USB-порт компьютера
3. Введите Pin-код и запустите приложение Solana на устройстве Nano
4. Дождитесь появления на экране надписи "Application is ready"

### Просмотр идентификатора Wallet ID

Выполните на компьютере следующую команду:

```bash
solana-keygen pubkey usb://ledger
```

Этим вы проверяете правильность подключения и готовность устройства Ledger к взаимодействию с интерфейсом командной строки Solana. Команда должна отобразить значение _wallet ID_ - уникальный идентификатор вашего устройства Ledger. Если у вас есть несколько устройств Nano, подключенных к одному компьютеру, вы можете использовать идентификатор Walled ID, чтобы указать, какой аппаратный кошелек Ledger вы хотите использовать. Если к вашему компьютеру подключено только одно устройство Nano, использовать идентификатор Wallet ID нет необходимости. Для получения информации о том, как использовать идентификатор Wallet ID для выбора устройства Ledger, обратитесь к разделу [Управление несколькими аппаратными кошельками](#manage-multiple-hardware-wallets).

### Просмотр адресов кошельков

Ваш Nano поддерживает произвольное число допустимых адресов кошельков и ключей для подписания. Для просмотра любого адреса используйте команду `solana-keygen pub`, как показано ниже, дополнив ее корректным [URL-адресом пары ключей](../hardware-wallets.md#specify-a-keypair-url).

Адреса нескольких кошельков могут оказаться полезны, если вы хотите переводить токены между своими счетами или использовать различные пары ключей на устройстве, например, в качестве уполномоченных подписей для stake-аккаунта.

Все перечисленные ниже команды отобразят разные адреса кошельков, связанные с разными адресами пар ключей. Попробуйте выполнить их!

```bash
solana-keygen pubkey usb://ledger
solana-keygen pubkey usb://ledger?key=0
solana-keygen pubkey usb://ledger?key=1
solana-keygen pubkey usb://ledger?key=2
```

- ПРИМЕЧАНИЕ: URL-пути игнорируются при использовании командной оболочки **zsh**. Дополнительная информация содержится в [разделе по решению проблем](#troubleshooting)

Вы также можете использовать другие значения параметра `ключ=`. Любой из адресов, отображаемых этими командами, является действительным адресом кошелька Solana. Закрытая часть кода, связанная с каждым адресом кошелька, безопасно хранится в устройстве Nano и используется для подписания транзакций с этого кошелька. Обратите внимание на то, какую URL пары ключей вы использовали для получения адреса кошелька, который вы хотите использовать для получения токенов.

Если вы планируете хранить только один адрес кошелька /пару ключей на вашем устройстве, то проще всего для запоминания использовать адрес `key=0`. Этот адрес можно узнать, выполнив следующую команду:

```bash
solana-keygen pubkey usb://ledger?key=0
```

Теперь у вас есть адрес (или несколько адресов) кошелька, и вы можете публично делиться любым из них для получения токенов, а также использовать соответствующий URL-адрес пары ключей для подписания транзакций с этого кошелька.

### Просмотр баланса

Чтобы просмотреть баланс любого аккаунта вне зависимости от того, какой кошелек он использует, выполните команду `solana balance`:

```bash
solana balance SOME_WALLET_ADDRESS
```

Например, для просмотра баланса кошелька `7cvkjYAkUYs4W8XcXsca7cBrEGFeSUjeZmKoNBvEwyri` выполните следующую команду:

```bash
solana balance 7cvkjYAkUYs4W8XcXsca7cBrEGFeSUjeZmKoNBvEwyri
```

Вы также можете просмотреть баланс любого кошелька в [эксплоре Solana](https://explorer.solana.com/accounts). Для этого перейдите на вкладку Accounts и вставьте адрес кошелька в поле поиска.

Примечание: любой кошелек с нулевым балансом (например, новый адрес с балансом 0 SOL, созданный вами на устройстве Ledger) будет отсутствовать в эксплорере (вы увидите сообщение "Not Found"). Solana не делает различий между пустыми и несуществующими аккаунтами. Все изменится, когда в кошельке аккаунта появятся несколько SOL.

### Отправка токенов SOL из Nano

Для отправки токенов с кошелька, хранящегося в вашем Nano, вам потребуется использовать устройство для подписания транзакции, указав тот же URL пары ключей, с помощью которого был сгенерирован кошелек. Для этого убедитесь, что устройство Nano подключено и разблокировано через PIN-код, приложение Ledger Live не запущено, а на устройстве запущено приложение Solana (вы видите надпись "Application is Ready").

Команда `solana transfer` указывает получателя и количество отправляемых токенов, а также с помощью аргумента `--keypair` определяет, какая пара ключей будет использоваться для подписи транзакции, и из какого кошелька будут отправлены токены.

```bash
solana transfer RECIPIENT_ADDRESS AMOUNT --keypair KEYPAIR_URL_OF_SENDER
```

Ниже приведен полный пример операции. Сначала получим адрес кошелька для определенной пары ключей. Далее, проверим баланс этого кошелька. Наконец, выполним транзакцию по переводу `1` SOL на адрес кошелька получателя `7cvkjYAkUYs4W8XcXsca7cBrEGFeSUjeZmKoNBvEwyri`. Когда вы нажмете клавишу Enter для выполнения команды по переводу токенов, вы получите запрос для подтверждения операции на устройстве Ledger. Используйте правую и левую кнопки на устройстве для просмотра деталей транзакции. Если все данные указаны правильно, нажмите одновременно обе кнопке на экране "Approve" для подтверждения, в противном случае нажмите обе кнопки на экране "Reject".

```bash
~$ solana-keygen pubkey usb://ledger?key=42
CjeqzArkZt6xwdnZ9NZSf8D1CNJN1rjeFiyd8q7iLWAV

~$ solana balance CjeqzArkZt6xwdnZ9NZSf8D1CNJN1rjeFiyd8q7iLWAV
1.000005 SOL

~$ solana transfer 7cvkjYAkUYs4W8XcXsca7cBrEGFeSUjeZmKoNBvEwyri 1 --keypair usb://ledger?key=42
Waiting for your approval on Ledger hardware wallet usb://ledger/2JT2Xvy6T8hSmT8g6WdeDbHUgoeGdj6bE2VueCZUJmyN
✅ Approved

Signature: kemu9jDEuPirKNRKiHan7ycybYsZp7pFefAdvWZRq5VRHCLgXTXaFVw3pfh87MQcWX4kQY4TjSBmESrwMApom1V
```

После подтверждения транзакции на вашем устройстве программа отобразит подпись транзакции и будет ожидать максимального количества подтверждений (32) перед тем как завершиться. Это занимает несколько секунд, после чего транзакция финализируется в сети Solana. Детали этой и других транзакций вы можете посмотреть на вкладке Transaction в [эксплорере Solana](https://explorer.solana.com/transactions), вставив транзакцию в поле поиска.

## Расширенные операции

### Управление несколькими аппаратными кошельками

Иногда полезно подписывать транзакции ключами из нескольких аппаратных кошельков. Подписание с использованием нескольких кошельков требует указания _полных FQDN-адресов пар ключей_. Если не указать полный URL, то командная строка Solana попросит сделать это для всех подключенных аппаратных кошельков, а также спросит, какой из кошельков следует использовать для каждой процедуры подписи.

Вместо использования интерактивных подсказок вы можете сгенерировать FQDN-адреса с помощью утилиты командной строки `resolve-signer`. Попробуйте для примера подключить устройство Nano к USB-порту, разблокировать его с помощью PIN-кода и запустить следующую команду:

```text
solana resolve-signer usb://ledger?key=0/0
```

Вы получите примерно следующее сообщение:

```text
usb://ledger/BsNsvfXqQTtJnagwFWdBS7FBXgnsK8VZ5CmuznN85swK?key=0/0
```

где `BsNsvfXqQTtJnagwFWdBS7FBXgnsK8VZ5CmuznN85swK` - это идентификатор `WALLET_ID` вашего кошелька.

Полные URL-адреса позволяют подключить несколько аппаратных кошельков к одному компьютеру и уникальным образом идентифицировать пары ключей любого из кошельков. Используйте вывод команды `resolve-signer` везде, где команда `solana` ожидает ввода значения `<KEYPAIR>`.

## Решение проблем

### В командной оболочке zsh игнорируются параметры URL-адреса пары ключей

Символ вопросительного знака является спецсимволом в командной оболочке zsh. Если вы не используете вопросительный знак в этих целях, просто добавьте в файл `~/.zshrc` следующую строку, чтобы система считала его обычным символом:

```bash
unsetopt nomatch
```

После этого перезапустите окно командной оболочки или запустите `~/.zshrc` следующим образом:

```bash
source ~/.zshrc
```

Если вы не хотите отключать специальную функцию символа "?", вы можете экранировать его с помощью обратной косой черты в URL-адресе. Например:

```bash
solana-keygen pubkey usb://ledger\?key=0
```

## Поддержка

Для получения дополнительной помощи посетите страницу [Wallet Support Page](../support.md).

Узнайте больше о [получении и отправке токенов](../../cli/transfer-tokens.md) и [делегировании стейка](../../cli/delegate-stake.md). Вы всегда можете использовать URL-адрес пары ключей Ledger там, где в качестве аргумента принимается `<KEYPAIR>`.
