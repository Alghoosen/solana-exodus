---
title: Аккаунты только для чтения
---

Этот дизайн охватывает обработку аккаунтов только для чтения и записи во [время выполнения](../validator/runtime.md). Несколько транзакций, которые изменяют один и тот же аккаунт, должны быть обработаны последовательно, чтобы они всегда воспроизводились в одном и том же порядке. В противном случае это может привести к недетерминизму реестра. Однако для некоторых транзакций требуется только чтение, а не изменение данных в определенных аккаунтах. Несколько транзакций, которые только читают один и тот же аккаунт, могут быть обработаны параллельно, так как порядок повторения не имеет значения, обеспечивая выигрыш в производительности.

Для идентификации аккаунтов только для чтения структура MessageHeader транзакций содержит `num_readonly_signed_accounts` и `num_readonly_unsigned_accounts`. Инструкция `program_ids` включается в вектор аккаунта как только для чтения,, неподписанные аккаунты, поскольку исполняемые аккаунты также не могут быть изменены во время обработки инструкции.

## Обработка во время выполнения

Правила обработки транзакций в реальном времени должны быть немного обновлены. Программы до сих пор не могут писать или тратить аккаунты, которыми они не владеют. Но новые правила работы гарантируют, что аккаунты только для чтения не могут быть изменены даже программами, которые ими владеют.

Аккаунты только для чтения имеют следующее свойство:

- Доступ только для чтения ко всем полям аккаунта, включая лэмпорты (нельзя кредитовать или дебетовать), и к данным аккаунта

Инструкции по кредитованию, дебетованию или изменению аккаунта только для чтения, не будут выполнены.

## Оптимизация блокировки аккаунта

Модуль "Аккаунты" следит за текущими заблокированными аккаунтами в реальном времени, отделяет аккаунты только для чтения от доступных для записи аккаунтов. Блокировка аккаунта по умолчанию дает ему статус «возможность для записи» и может быть доступна только одним потоком обработки за один раз. Аккаунты только для чтения заблокированы отдельным механизмом, позволяющим выполнять параллельное чтение.

Хотя это еще не реализовано, аккаунты только для чтения могут кэшироваться в памяти и совместно использоваться всеми потоками, выполняющими транзакции. В идеальном варианте этот кэш будет храниться до тех пор, пока на аккаунт только для чтения ссылается любая транзакция, проходящая через среду выполнения, и освобождаться при завершении последней транзакции.

Аккаунты для чтения также могут быть переданы в процессор в качестве ссылок, сохраняя дополнительную копию.
