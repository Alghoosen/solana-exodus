---
title: Управление Vote аккаунтом
---

Эта страница описывает, как настроить _vote account_. Создание vote аккаунта необходимо, если вы планируете запустить узел валидатора на Solana.

## Создание Vote аккаунта

Vote аккаунт может быть создан с помощью команды [create-vote-account](../cli/usage.md#solana-create-vote-account). Он может быть настроен при первом создании или после запуска валидатора. Все аспекты Vote аккаунта могут быть изменены, за исключением [vote account address](#vote-account-address), который фиксируется на срок его действия.

### Настройка существующего Vote аккаунта

- Чтобы изменить [validator-identity](#validator-identity), используйте [vote-update-validator](../cli/usage.md#solana-vote-update-validator).
- Чтобы изменить [vote authority](#vote-authority), используйте [vote-authorize-voter](../cli/usage.md#solana-vote-authorize-voter).
- Чтобы изменить [vwithdraw authority](#withdraw-authority), используйте [vote-authorize-voter](../cli/usage.md#solana-vote-authorize-withdrawer).
- Чтобы сменить [commission](#commission), используйте [vote-update-commission](../cli/usage.md#solana-vote-update-commission).

## Структура Vote аккаунта

### Адрес Vote аккаунта

Vote аккаунт создается по адресу, который является либо публичным ключом keypair файла, либо на производном адресе, основанном на публичном ключе файла с использованием пароля и seed фразы.

Адрес Vote аккаунта никогда не требуется для подписания каких-либо транзакций, он используется только для поиска информации об учетной записи.

Когда кто-то хочет [делегировать токены на счет участника](../staking.md), команда делегирования указывается на адрес учетной записи Vote аккаунта, которому происходит делегация.

### Validator Identity

Validator Identity _валидатора_ — это системный аккаунт, который используется для оплаты всех комиссий vote транзакций, подтверждённых vote аккаунтом. Поскольку валидатор должен голосовать по большинству действительных блоков, то Validator Identity валидатора часто генерирует (потенциально несколько раз в секунду) транзакции подписания и платит комиссии за них. По этой причине validator identity keypair должен храниться как «горячий кошелек» в файле ключей в той же системе, где запущен валидатор.

Поскольку горячий кошелек, как правило, менее безопасен, чем оффлайн или холодный кошелек, оператор валидатора может хранить там только необходимое количество SOL для покрытия комиссий за голосование в течение ограниченного количества времени, например, несколько недель или месяцев. Validator identity может периодически пополняться с более безопасного кошелька.

Эта практика может уменьшить риск потери средств, если диск или файловая система узла валидатора будет взломана или повредиться.

Validator identity должен быть указан при создании Vote аккаунта. Validator identity также можно изменить после создания учетной записи с помощью команды [vote-update-validator](../cli/usage.md#solana-vote-update-validator).

### Vote Authority

_Vote authority_ используются для подписания каждой транзакции голосования, которую валидатор хочет отправить кластеру. Это не обязательно должно быть уникальным из validator identity, это будет видно в этом документе позже. Поскольку vote authority, как и validator identity, часто подписывает транзакции, он тоже должен быть горячим ключом в той же файловой системе, что и validator identity.

Vote authority может быть установлен на тот же адрес, что и validator identity. Если validator identity также является vote authority, только одна подпись для одной транзакции голосования необходима, чтобы подписать голос и заплатить комиссию за транзакцию. Поскольку плата за транзакцию в Solana начисляется за каждую подпись, наличие одного подписывающего лица вместо двух приведет к тому, что будет оплачена половина комиссии за транзакцию по сравнению с тем, если vote authority и validator identity будут сделаны на два разных аккаунта.

Vote authority быть установлен при создании vote аккаунта. Если он не указан, по умолчанию это назначение будет ровняться validator identity. Vote authority может быть изменен позже с помощью команды [vote-authorize-voter](../cli/usage.md#solana-vote-authorize-voter).

Vote authority может быть изменен один раз за эпоху. Если он изменен с помощью [vote-authorize-voter](../cli/usage.md#solana-vote-authorize-voter), то изменения вступят в силу только в начале следующей эпохи. Чтобы обеспечить плавный переход права подписи, `solana-validator` позволяет многократно указывать аргумент `--authorized-voter`. Это позволяет валидатору успешно продолжать голосование когда сеть достигает границ эпохи, при которой валидатор меняет vote authority.

### Withdraw Authority

_Withdraw authority_ используется для снятия средств с vote аккаунта, то делается с помощью команды [withdraw-from-vote-account](../cli/usage.md#solana-withdraw-from-vote-account). Любая награда, которую получает валидатор, зачисляется на vote аккаунт и может быть получена только с подписью withdraw authority.

Withdraw authority также требуется для подписания любой транзакции, для изменения комиссии [vote аккаунта](#commission), а также для изменения validator identity для vote аккаунта.

Поскольку на vote аккаунт может зачисляться значительный баланс, подумайте о том, чтобы сохранить ключ withdraw authority на офлайн/холодном кошельке, так как он не требуется для подписания частых транзакций.

Withdraw authority средств может быть установлен при создании vote аккаунта с использованием параметра `--authorized-withdrawer`. Если он не указан, по умолчанию будет установлен validator identity в качестве withdraw authority.

Withdraw authority может быть изменен позже с помощью команды [vote-authorize-voter](../cli/usage.md#solana-vote-authorize-withdrawer).

### Комиссия

_Комиссия_ - процент сетевых вознаграждений, заработанных валидатором и зачисленных на его vote аккаунт. Оставшиеся вознаграждения распределяются по всем аккаунтам, делегированным на этот vote аккаунт, пропорционально весу активной доли каждого stake аккаунта.

Например, если vote аккаунт имеет комиссию 10% за все награды, заработанные валидатором в данной эпохе, то 10% из этих наград будут внесены на vote аккаунт в первом блоке следующей эпохи. Остальные 90% будут депонированы на делегированные stake аккаунты в качестве немедленно активного стейка.

Валидатор может выбрать низкую комиссию, чтобы попытаться привлечь больше делегаций, соответственно, чем меньше комиссия, тем больше процент вознаграждений будет передан делегирующему. Поскольку существуют расходы, связанные с настройкой и управлением узлом валидатора, валидатор в идеале установит достаточно высокую комиссию для того, чтобы по крайней мере покрыть их расходы.

Комиссия может быть установлена при создании vote аккаунта с параметром `--commission`. Если это значение не установлено, то по умолчанию оно будет 100%, что приведет к тому, что все награды будут зачислены на vote аккаунт валидатора.

Комиссия также может быть изменена позже командой [vote-update-commission](../cli/usage.md#solana-vote-update-commission).

При установке комиссии принимаются только целые значения в наборе [0-100]. Целое число показывает количество процентов, так что если создать аккаунт с `--commission 10`, то будет установлена комиссия 10%.

## Ротация ключей

Ротация ключей для vote authority аккаунта требует специальных действий при работе с с он-лайн валидатором.

### Vote Account Validator Identity

Вам понадобится доступ к _withdraw authority_ ключу для vote аккаунта, чтобы изменить validator identity. Следующие шаги предполагают, что `~/withdraw-authority.json` - это тот самый необходимый ключ.

1. Создайте новый validator identity ключ `solana-keygen new -o ~/new-validator-keypair.json`.
2. Убедитесь, что новый аккаунт необходимым количеством монет `solana transfer ~/new-validator-keypair.json 500`.
3. Запустите `solana vote-update-validator ~/vote-account-keypair.json ~/new-validator-keypair.json ~/withdraw-authority.json` чтобы изменить validator identity для vote account
4. Перезапустите ваш валидатор с новым identity ключом `--identity`

### Vote Account Authorized Voter

_Vote authority_ ключ может быть изменен только на границе эпохи и для этого требуются дополнительные аргументы `solana-validator` (для бесшовного перехода).

1. Выполните `solana epoch-info`. Если в текущей эпохе осталось не много времени, подумайте об ожидании следующей эпохи, чтобы предоставить вашему валидатору достаточно времени для перезагрузки и синхронизации с блокчейном.
2. Создайте новый vote authority ключ `solana-keygen new -o ~/new-vote-authority.json`.
3. Определите текущий _vote authority_ ключ, запустив `solana vote-account ~/vote-account-keypair.json`. Это может быть validator identity валидатора (по умолчанию) или какой-либо другой ключ. Следующие шаги предполагают, что `~/validator-keypair.json` - это тот самый необходимый ключ.
4. Выполните `solana vote-authorize-voter ~/vote-account-keypair.json ~/validator-keypair.json ~/new-vote-authority.json`. Новый vote authority станет активным начиная со следующей эпохи.
5. `solana-validator` должен быть перезапущен со старыми и новыми vote authority ключами, чтобы он мог плавно переходить на следующую эпоху. Добавьте два аргумента при перезапуске: `--authorized-voter ~/validator-keypair.json --authorized-voter ~/new-vote-authority.json`
6. После того, как кластер достигнет следующей эпохи, удалите `--authorized-voter ~/validator-keypair. son` аргумент и перезапустите `solana-validator`, так как старый vote authority ключ больше не требуется.

### Vote Account Authorized Withdrawer

Специальных команд не требуется. При необходимости используйте команду `solana vote-authorize-withdrawer`.
