---
title: アカウント管理に投票する
---

このページでは、オンチェーンの _投票アカウント_ を設定する方法について説明します。 Solana でバリデータノードを実行する場合は、投票 アカウントの作成が必要です。

## 投票アカウントを作成

[create-vote-account](../cli/usage.md#solana-create-vote-account) コマンドを使用して投票アカウントを作成できます。 投票アカウントは、最初に作成されたとき、またはバリデータが 実行されたときに設定できます。 [議決権行使アカウント](#vote-account-address)は、アカウントの存続期間中に固定されている議決権行使アカウントのアドレスを除き、すべての面で変更することができます。

### 既存の投票アカウントを設定する

- [validator identity](#validator-identity)を変更するには、 [vote-update-validator](../cli/usage.md#solana-vote-update-validator) を使用します。
- [vote authority](#vote-authority)を変更するには、 [vote-authorize-voter](../cli/usage.md#solana-vote-authorize-voter) を使用します。
- [recovery authorization](#withdraw-authority)を変更するには、 [を使って vote-authorize-withdrawer](../cli/usage.md#solana-vote-authorize-withdrawer) を使用します。
- [コミッション](#commission)を変更するには、 [票更新委員会](../cli/usage.md#solana-vote-update-commission) を使用します。

## アカウントの構成

### 投票アカウントアドレス

投票用アカウントは、キーペアファイルの公開キー、またはキーペアファイルの公開キーとシード文字列に基づいて派生したアドレスのいずれかで作成されます。

投票用アカウントのアドレスは、取引の署名には必要なく、アカウント情報を調べるためだけに使用されます。

誰かが[ステーキングアカウントのトークンを委任したい場合](../staking.md)、委任コマンドはトークン保有者が委任したいバリデータの投票アカウントのアドレスを指します。

### Validator Identity

The _validator identity_ is used to pay for all the vote transaction fees submitted to the vote account. バリデータは、受け取ったブロックの中で最も有効なブロックに投票することが期待されるため、 バリデーター ID アカウントは頻繁に(潜在的に毎秒複数回) トランザクションに署名し、手数料を支払います。 このため、バリデータ Id キーペアは、キーペアファイル内の "ホットウォレット" としてプロセスが実行されているのと同じシステムで保存されなければなりません。

ホットウォレットは一般的にオフラインまたは"コールド」"ウォレットよりも安全性が低いため、バリデータオペレータは、数週間または数か月などの限られた期間の投票料金を賄うだけの SOL を ID アカウントに保存することを選択でます。 より安全なウォレットから、バリデータ ID アカウントを定期的にトッピングすることができます。

このプラクティスは、バリデータノードのディスクまたはファイルシステムが侵害または破損した場合、資金の損失のリスクを軽減できます。

バリデータの ID は、投票用アカウントの作成時に入力する必要があります。 バリデーターは、アカウント作成後に [vote-update-validator ](../cli/usage.md#solana-vote-update-validator)コマンドを使って変更することもできます。

### 投票権限

*投票権限者*のキーペアは、バリデータノードがクラスターに提出したい 各投票トランザクションに署名するために使用します。 後述するように、このキーペアは必ずしもバリデータの ID から一意である 必要はありません。 投票権者はバリデータ ID と同様に頻繁にトランザクションに署名するので、 これもバリデータプロセスと同じファイルシステム上のホットキーペアでなければなりません。

投票権者は、バリデータ ID と同じアドレスに設定することができます。 バリデータの ID が投票権者でもある場合、投票の署名と取引手数料の支払いの両方を行うために必要な署名は、投票取引ごとに 1 つだけです。 Solana の取引手数料は署名ごとに課金されるので、署名者を 2 人から 1 人にすると、 投票権者と検証者の ID を 2 つの異なるアカウントに設定した場合と比べて、 取引手数料が半分になります。

投票権は、投票アカウントの作成時に設定することができます。 提供されていない場合のデフォルトの動作は、 バリデータの ID と同じものを割り当てるというものです。 投票権は後で [voter-authorize-voter](../cli/usage.md#solana-vote-authorize-voter) コマンドで変更することができます。

投票権はエポック毎に一度だけ変更することができます。 投票権を[vote-authorize-voter](../cli/usage.md#solana-vote-authorize-voter)で変更した場合、次のエポックが始まるまでその変更は有効になりません。 投票権の署名のスムーズな移行をサポートするために、`solana-validator`は` --authorized-voter`引数を複数回指定することができます。 これにより、ネットワークがエポック境界に達してバリデータの投票権限アカウントが変更されても、バリデータプロセスは正常に投票を続けることができます。

### 出金権限

*引き出し権限*キーペアは、[withdraw-from-vote-account](../cli/usage.md#solana-withdraw-from-vote-account)コマンドで投票口座から資金を引き出す際に使用します。 バリデータが獲得したネットワークリワードは投票口座に預けられ、 引き出し権限のキーペアで署名しなければ取り出すことができません。

脱退権限者は、投票アカウントの[コミッション](#commission)を変更するトランザクションや、 投票アカウントのバリデータの ID を変更するトランザクションにも署名する必要があります。

投票権付きアカウントには多額の残高が発生する可能性があるので、 頻繁な取引に署名する必要がないように、引き出し権限のキーペアをオフライン/コールドウォレットに保管することを検討してください。

引き出し権限は、投票アカウント作成時に`--authorized-withdrawer`オプションで設定できます。 これが指定されていない場合、デフォルトではバリデータの ID が引き出し権限として設定されます。

引き出し権限は後で [vote-authorize-withdrawer](../cli/usage.md#solana-vote-authorize-withdrawer) コマンドで変更することができます。

### コミッション

*コミッション*とは、バリデータが獲得したネットワークリワードのうち、バリデータの投票アカウントに入金される割合のことです。 残りの報酬は、その投票アカウントに委任されたすべてのステーキングアカウントに、各ステーキングアカウントのアクティブなステーキング荷重に比例して分配されます。

例えば、ある投票アカウントのコミッションが 10%の場合、あるエポックでそのバリデータが獲得したすべての報酬について、これらの報酬の 10%が次のエポックの最初のブロックの投票アカウントに振り分けられます。 残りの 90%は委任されたステーキングアカウントに即時有効なステーキングとして入金されます。

バリデータは、より多くのステーキングデリゲーションを集めるために低い手数料を設定することができます。手数料が低ければ低いほど、デレゲーションに還元される報酬の割合が大きくなるからです。 バリデータノードの設置・運営にはコストがかかるので、 バリデータは少なくともその費用をカバーできるような 高い手数料を設定するのが理想的です。

コミッションは投票アカウント作成時に`--commission`オプションで設定できます。 これが指定されていない場合は、デフォルトで 100%となり、すべての報酬が投票アカウントに入金され、委任されたステーキングアカウントには何も渡されません。

Commission は、 [vote-update-comment](../cli/usage.md#solana-vote-update-commission) コマンドで後から変更することもできます。

コミッションの設定では、[0-100] の整数値のみを受け付けます。　 整数値はコミッションのパーセンテージポイント数を表し、`--commission 10`でアカウントを作成すると、10%のコミッションが設定されます。

## キーローテーション

投票アカウントの権限キーをローテーションさせるには、ライブバリデータを扱う際に特別な処理が必要です。

### アカウントバリデーターの ID

バリデータの Id を変更するには、投票アカウントの _withdrawal authority_ キーペアにアクセスする必要があります。 以下の手順では、`~/withdraw-authority.json`がそのキーペアであると仮定します。

1. `solana-keygen new -o ~/new-validator-keypair.json` で、新しいバリデーター ID のキーペアを作成します。
2. 新しいアカウント ID に入金されたことを確認してください。 `solana transfer ~/new-validator-keypair.json 500`.
3. `solana vote-update-validator ~/vote-account-keypair.json ~/new-validator-keypair.json ~/withdraw-authority.json` 投票アカウントのバリデータを変更します。
4. `--identity` 引数の新しい ID キーペアでバリデータを再起動します。

### 承認された投票者

*投票権者*のキーペアはエポック境界でのみ変更される可能性があり、シームレスな移行のために`solana-validator`にいくつかの追加引数が必要です。

1. `solana エポック情報` を実行します。 現在のエポックにあまり時間が残っていない場合は、次のエポックまで待って、バリデータが再起動して追いつくのに十分な時間を確保することを検討します。
2. 新しい投票権限キーペアを作成します。 `solana-keygen new -o ~/new-vote-authority.json`。
3. 現在の _投票権限_ キーペアを指定するには、 `solana vote-account ~/vote-account-keypair.json` を実行します。 バリデーターの ID アカウント (デフォルト) またはその他のキーペアである可能性があります。 以下の手順は、 `~/validator-keypair.json` がそのキーペアであると仮定します。
4. `solana vote-authorize-voter ~/vote-account-keypair.json ~/validator-keypair.json ~/new-vote-authority.json`. 新しい投票権限は、次の時点からアクティブになる予定です。
5. `solana-validator` を古い投票と新しい投票で再起動する必要があります。 次の時点でスムーズに移行できるようにしました 再起動時に 2 つの引数を追加: `--authorized-voter ~/validator-keypair.json --authorized-voter ~/new-vote-authority.json`
6. クラスタが次のエポックに達した後、`--authorized-voter ~/validator-keypair.json`引数を削除して`solana-validator`を再起動すると、古い投票権キーペアが必要なくなります。

### 承認されたアカウントに投票します

特別な処理は必要ありません。 必要に応じて、 `solana vote-authorize-covery` コマンドを使用します。
