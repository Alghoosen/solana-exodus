---
title: Rent
---

Solanaのアカウントは、アカウントの残高とは別に、オーナーが管理する状態の\(`Account::data`\)を持つことができる \(`Account::lamports`\)があります。 ネットワーク上のバリデータはメモリ内でこの状態の作業コピーを維持する必要があります。 ネットワークは、このリソース消費に対して時間と空間に基づく家賃とも呼ばれる、手数料を請求します。

## 二段賃料制度

2年分の賃料に相当する最低残高を維持するアカウントは免除されます。 _2 年_ は、実際のハードウェアコストが2年ごとに50%下がることと、幾何学的なシリーズであることによって生じる収束から引き出されます。 残高がこの閾値を下回る口座は、バイト年あたりのランポートで、ジェネシスで指定されたレートで賃貸料が課金されます。 ネットワークは、次の時期の代わりに、エポック単位で賃料を請求します そして `Account::rent_ephoch` は、次回の賃貸料をアカウントから収集する必要があることを記録します。

現在、賃料はジェネシスで固定されています。 しかし、当時の基盤となるハードウェアストレージコストを反映して動的であると予想されます。 したがって、ハードウェアのコストが低下するにつれて価格は一般的に下がると予想されます。

## 賃料を徴収するタイミング

アカウントから賃料を徴収するタイミングは、2つあります。\(1\) トランザクションで参照されたときと、 \(2\) 定期的に1エポックで参照されたときです。 \(1\) には、新しいアカウントを作成するためのトランザクションが含まれています バンクによる通常の取引中に負荷フェーズの一部として発生します \(2\) は、最近のエポックでは参照されていない古いアカウントから賃料を確実に回収するために存在します。 \(2\) は、アカウントの全スキャンを必要とし、この家賃の回収による負荷スパイクを避けるために、アカウントアドレスプレフィックスに基づいてエポックに広がっています。

それどころか、以下を含むプロトコルレベルの"ブックキーピングプロセス"によって直接操作されるアカウントには、賃貸料のコレクションは適用されません。

- 賃料回収自体の分布(それ以外は、家賃回収の処理が再発する可能性があります)
- すべてのエポックの開始時にステーキング報酬の分布(新しいエポックの開始時に処理スパイクを減らすため)
- 各スロットの最後に取引手数料を分配する

これらのプロセスが賃料回収の範囲外であっても、最終的には操作されたアカウントはすべて\(2\) メカニズムで処理されます。

## 実際の賃料回収の処理

賃料は、1エポックの時間毎に支払われます そして、アカウントには `Account::rent_ephoch` の `current_epoch` または `current_epoch + 1` が賃料制度によって異なります。

アカウントが免除されている場合、 `Account::rent_epogh` は `current_epogh` に更新されます。

アカウントが免除されていない場合、 次のエポックと `Account::rent_epoch` の違いは、このアカウント \( `Rent::due()` \) によって支払われる賃料の額を計算するのに使用されます。 計算の分数ランポートは切り捨てられます。 `Account::lamports` から、 `Account::rent_eposh` が `current_eposh + 1` (= next epoch) に更新されます。 料金が1未満の場合は、アカウントに変更はありません。

残高が不足しているアカウントは、賃料を支払うことができません。

回収した何割かの賃料は破棄されます。 残りの金額は各スロットの終了時に、取引手数料のようにステーキング荷重に応じてバリデータアカウントに分配されます。

最後に賃料の徴収は、バリデータへの賃料の分配のようなプロトコルレベルのアカウントの更新に従って行われ、賃料控除のための対応するトランザクションは存在しません。 そのため、賃料の徴収は目に見えず、最近の取引やアカウントアドレスのプレフィックスから所定のタイミングで、暗黙的に観察できるだけです。

## 設計上の考慮事項

### 現在の設計理論値

これまでの設計では、ダラダラと手を付けずに、賃料も払わずに済むようなアカウントはあり得ません。 アカウントは、"賃貸料免除"、"sysvar"および"実行可能なアカウント"を除き、各時点で常に賃料を正確に1回支払います。

これは意図された設計の選択です。 そうでなければ、 賃料(現時点ではリーダ) を不当に利益を上げたり、与えられた賃料を節約したりする可能性がある人は誰でも `Noop` 指示で不正な賃料回収を引き起こすことが可能です。

この選択のもう一つの副作用として、定期的に賃料を徴収することで、バリデータは古いアカウントを最適な方法でコールドストレージに保存せず、ストレージコストを節約することを余儀なくされることにも注意してください。 逆に言えば、悪意のあるユーザーが大量のゴミアカウントを積み上げてバリデータに負担をかけることを防ぐことができます。

このデザインの全体的な結果として、すべてのアカウントはバリデータのワーキングセットとして同じパフォーマンス特性で保存され、均一なレンタル価格構造をストレートに反映しています。

### アドホックコレクション

賃料の徴収は、必要に応じて\(つまり アカウントが読み込まれたり、アクセスされたりするたびに\)行われることが考えられます。 このようなアプローチの問題は次のとおりです。

- "クレジットオンリー"と表示されている勘定科目は、非常に合理的に考えて賃料が発生する可能性があります。

  しかし、そのようなトランザクションの間、書き込みはできません。

- a mechanism to "beat the bushes" \(i.e. go find accounts that need to pay rent\) is desirable,

  読み込み頻度の低いアカウントがタダ乗りしないように

### 賃料回収のシステム説明

システムインストラクションによる賃料の徴収も検討されましたが、これは自然に賃料をアクティブなノードやステーキング荷重の高いノードに分配することができ、段階的に行うことができました。 しかしながら、

- ネットワークのスループットに悪影響を及ぼすでしょう。
- システムプログラム以外の所有者のアカウントがこの命令によって引き落とされる可能性があるため、ランタイムによる特別な処理が必要となります。
- 誰かがトランザクションを発行しなければなりません。
