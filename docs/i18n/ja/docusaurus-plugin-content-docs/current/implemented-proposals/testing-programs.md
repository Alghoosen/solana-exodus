---
title: プログラムのテスト
---

アプリケーションは、トランザクションを Solana クラスタに送信し、トランザクションが処理されたことを確認し、各トランザクションの結果を確認するためのクエリバリデータを送信します。 クラスタが予想通りに動作しない場合、いくつかの理由が考えられます。

- プログラムにバグがあります
- BPF ローダーは安全でないプログラム命令を拒否しました
- トランザクションが大きすぎます
- トランザクションが無効です
- ランタイムは別のトランザクションにアクセスしようとしました

  同一アカウント

- ネットワークがトランザクションを削除しました
- クラスターは台帳をロールバックしました
- バリデータがクエリに悪意を持って応答しました

## "AsyncClient"と"SyncClient"の特性

トラブルシューティングを行うには、より少ないエラーが可能な低レベルのコンポーネントを再度ターゲットにする必要があります。 リターゲティングは、"AsyncClient" および "SyncClient" トレートの実装によって行うことができます。

コンポーネントは以下の主要メソッドを実装します。

```text
trait AsyncClient {
    fn async_send_transaction(&self, transaction: Transaction) -> io::Result<Signature>;
}

trait SyncClient {
    fn get_signature_status(&self, signature: &Signature) -> Result<Option<transaction::Result<()>>>;
}
```

ユーザーはトランザクションを送信し、非同期と同期的に結果を待ちます。

### クラスタ用 ThinClient

最高レベルの実装である"ThinClient"は、配備済みの"testnet"または開発マシン上で動作するローカルクラスタである"Solana クラスタ"をターゲットにしています。

### TPU 用の TpuClient

次のレベルは、まだ実装されていない TPU 実装です。 TPU レベルでは、アプリケーションは Rust チャネルを介してトランザクションを送信します。Rust チャネルでは、ネットワークキューやパケットのドロップに驚きはありません。 TPU はすべての「通常の」トランザクションエラーを実装しています。 これは署名検証を行い、アカウントで使用中のエラーを報告することがあります。そうしないと台帳に履歴ハッシュの証明が完了します。

## 低レベルテスト

### バンクのためのバンククライアント

TPU レベルの下にバンクがあります。 バンクは署名の検証や台帳の作成を行いません。 バンクは、新しいオンチェーンプログラムをテストするための便利なレイヤーです。 これにより、開発者はネイティブプログラムの実装と BPF コンパイルされたバリアントを切り替えることができます。 取引トレートの必要はありません。 バンクの API は同期しています。

## ランタイムによるユニットテスト

バンクの下にランタイムがあります。 ランタイムは、ユニットテストに理想的なテスト環境です。 Runtime をネイティブプログラムの実装に静的にリンクすることで、開発者は可能な限り最短の"edit-compile-run"ループを作成します。 スタックトレースには、動的リンクがなければ"デバッグシンボル"が含まれ、プログラムエラーは簡単にトラブルシューティングできます。
