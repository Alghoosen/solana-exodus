---
title: スラッシングルール
---

Proof of Work\(PoW\) では、ブロック構築時や投票時にオフチェーンでの資本コストが発生しますが、PoSシステムでは、複数チェーンでの投票という論理的・最適な戦略を防ぐために、キャピタルアットリスクが必要となります。 我々は、違反した場合、違反したバリデータの預託金の一部が流通から取り除かれるスラッシュルールを実装する予定です。 PoHのデータ構造の順序性を考慮すると、スラッシュルールは投票ごとに割り当てられる投票ロックアウト時間のレベルまで単純化できると考えています。

つまり、 各投票にはロックアウト時間\(PoH duration\) が設定されています。この時間は、そのバリデータが追加の投票を行う際に、元の投票を含むPoHに投票しなければならない時間、もしくはそのバリデータのステークの一部が切り捨て可能になる時間を表します。 この継続時間は、最初の投票のPoH数と追加の投票のPoH数の関数です。 これはおそらく次のような形になるでしょう。

```text
Lockouti\(PoHi, PoHj\) = PoHj + K \* exp\(\(PoHj - PoHi\) / K\)
```

ここでPoHiはロックアウトを適用する票の高さ、PoHjは同じフォークの現在の票の高さです。 もしバリデータが別のPoHフォークでk &gt;> j &gt;> iかつPoHk&lt; < Lockout\(PoHi, PoHj\) の投票を行った場合、そのバリデータの持ち株の一部が削られる危険性があります。

上述の機能的な形式のロックアウトに加えて、初期の実装では\(FIFO\) のデータ構造と以下のような論理に基づく数値的な近似値を使用することができます。

- クティブなバリデータごとに32票を保持するFIFOキュー
- 新しい投票はキュー \(`push_front` \) の上にプッシュされます
- 期限切れの票はキューのトップから削除されます。\(`pop_front`\)
- 票がキューに押し込まれると、キューに入っている各票のロックアウトは2倍になります。
- 票はキューの後ろから削除されます。 `if queue.len() >> 32`
- キューの後ろから削除された最初の高さと最新の高さが保存されます。

このスラッシュ条件に違反した証拠をPoHに提出したノードには、スラッシュ量の％として報酬が提供されることになりそうです。

### 部分的なスラッシング

これまでに説明したスキーマでは、バリデータが特定のPoHストリームに投票すると、 投票ロックアウトによって決定された期間中はそのフォークにコミットすることになります。 未解決の問題として、正直なミスやビットの反転に対する罰則が厳しすぎると感じた場合、バリデータは利用可能なフォークへの投票を開始することを躊躇するのではないでしょうか。

この問題を解決する方法の一つとして、どちらかの関数としてスラッシュ可能な量になる部分スラッシュデザインがあります。

1. 同時期に削減されたバリデーターのうちの割合\(ala Casper\)
2. 投票してからの経過時間\(例：時間の経過に伴って斬られる割合が直線的に増えていく\)、またはその両方。

これは現在検討中の分野です。
