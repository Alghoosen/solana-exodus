---
title: الإنتقال من قائد إلى قائد (Leader-to-Leader Transition)
---

يصف هذا التصميم كيفية قيام القادة بنقل إنتاج PoH دفتر الأستاذ (ledger) بين بعضهم البعض حيث يقوم كل قائد (leader) بإنشاء الفُتحة (Slot) الخاصة به.

## التحديات (Challenges)

القائد الحالي والقائد التالي كلاهما يتسابقان لتوليد العلامة النهائية للفُتحة (Slot) الحالية. قد يصل القائد التالي إلى تلك الفُتحة (Slot) بينما لا يزال يُعالج مُدخلات (entries) القائد الحالي.

السيناريو المثالي هو أن يكون القائد التالي قد أنشأ مكانه الخاص مُباشرة بعد أن كان قادرًا على التصويت للقائد الحالي. من المُحتمل جدًا أن يصل القائد التالي إلى إرتفاع فُتحة PoH قبل أن ينتهي القائد الحالي من بث الكتلة (block) بأكملها.

يجب على القائد التالي إتخاذ قرار إرفاق الكتلة (block) الخاصة به بآخر كتلة مُكتملة، أو الإنتظار لإنهاء الكتلة المُعلقة. من المُمكن أن يقوم القائد التالي بإنتاج كتلة (block) تقترح فشل القائد الحالي، على الرغم من أن بقية الشبكة تلاحظ نجاح هذا الحظر.

لدى القائد الحالي حوافز لبدء فُتحته (slot) في أقرب وقت مُمكن للحصول على المُكافآت الإقتصادية. يجب أن تكون هذه الحوافز مُتوازنة من خلال حاجة القائد إلى ربط كتلته (block) بكتلة لديها أكبر قدر من الإلتزام من بقية الشبكة.

## مُهلة القائد (Leader timeout)

بينما يتلقى القائد بنشاط مُدخلات (entries) للفُتحة (Slot) السابقة، يُمكن للقائد تأخير بث بداية الكتلة (block) الخاصة به في الوقت الفعلي. التأخير قابل للتعديل محليًا بواسطة كل قائد، ويُمكن أن يعتمد ديناميكيًا على سلوك القائد السابق. إذا تم تأكيد كتلة (block) القائد السابق بواسطة TVU الخاص بالزعيم قبل إنتهاء المُهلة، تتم إعادة تعيين PoH إلى بداية الفُتحة (Slot) ويقوم هذا القائد بإنتاج الكتلة (block) الخاصة به على الفور.

الجوانب السلبية:

- يقوم القائد بتأخير الفُتحة (Slot) الخاصة به، مما قد يُتيح للقائد التالي مزيدًا من الوقت لذلك

  اللحاق بالركب.

المكاسب مُقارنة بالحراس:

- يتم إستخدام كل المساحة في الكتلة (block) للمُدخلات (entries).
- المُهلة غير ثابتة.
- المُهلة الزمنية محلية بالنسبة للقائد، وبالتالي يُمكن أن تكون ذكية. يُمكن للقائد أن يأخذ في الحسبان أداء التوربين (turbine).
- هذا التصميم لا يتطلب إنقسام أو شوكة (fork) دفتر الأستاذ (ledger) للتحديث.
- يُمكن للقائد السابق نقل المُدخل (entry) الأخير في الكتلة (block) بشكل مُتكرر إلى القائد التالي، ويُمكن للقائد التالي أن يُقرر بشكل مُضارب أن يثق به لإنشاء الكتلة (block) الخاصة به دون التحقق من الكتلة (block) السابقة.
- يُمكن للقائد أن يُولد بشكل مضارب آخر علامة (tick) من آخر دخول تم إستلامه.
- يمكن للقائد مُعالجة المُعاملات بشكل مُضارب وتخمين أي منها لن يتم ترميزه بواسطة القائد السابق. هذا هو أيضا ناقل هجوم الرقابة (censorship attack vector). قد يحجب القائد الحالي المُعاملات التي يتلقاها من العملاء حتى يتمكن من تشفيرها في الفُتحة (Slot) الخاصة به. بمُجرد المُعالجة، يُمكن إعادة المُدخلات (entries) في PoH بسرعة.

## خيارات التصميم البديلة (Alternative design options)

### وضع علامة (tick) الحراسة في نهاية الفُتحة (Guard tick at the end of the slot)

لا ينتج القائد مُدخلات (entries) في الكتلة (block) الخاصة به بعد العلامة قبل الأخيرة _penultimate tick_، وهي العلامة (tick) الأخيرة قبل العلامة الأولى في الفُتحة (Slot) التالية. تُصوت الشبكة على العلامة الأخيرة _last tick_، وبالتالي فإن الفارق الزمني بين العلامة قبل الأخيرة *penultimate tick*و العلامة الأخيرة _last tick_ هو التأخير الإجباري للشبكة بأكملها، بالإضافة إلى القائد التالي قبل إنشاء فُتحة (Slot) جديدة. يُمكن أن تُنتج الشبكة _last tick_ من _penultimate tick_.

إذا تلقى القائد التالي العلامة قبل الأخيرة _penultimate tick_ قبل أن ينتج علامته الأولى *first tick*الخاصة به، فسوف يُعيد تعيين PoH الخاص به وينتج علامته الأولى _first tick_ من العلامة قبل الأخيرة _penultimate tick_ للقائد السابق. ستقوم بقية الشبكة أيضًا بإعادة تعيين PoH الخاص بها لإنتاج _last tick_ كمُعرف للتصويت عليه.

الجوانب السلبية:

- كل تصويت، وبالتالي كل تأكيد، يتأخر بمُهلة مُحددة. عدد 1 tick، أو حوالي 100جزء من الثانية الواحدة.
- سيكون مُتوسط وقت تأكيد حالة للمُعاملة أسوأ بمقدار 50 100جزء من الثانية الواحدة على الأقل.
- إنه جزء من تعريف دفتر الأستاذ (ledger)، لذا فإن تغيير هذا السلوك يتطلب إنقسام أو شوكة (fork).
- لا يتم إستخدام كل المساحة المُتاحة للمُدخلات (entries).

الإيجابيات مُقارنة بمُهلة القائد:

- تلقى القائد التالي جميع المُدخلات (entries)، لذلك يُمكنه بدء مُعالجة المُعاملات دون تسجيلها في PoH.
- يُمكن للقائد السابق أن يُرسل بشكل مُتكرر المُدخل (entry) الأخير الذي يحتوي على العلامة (tick) قبل الأخيرة _penultimate tick_ إلى القائد التالي. يُمكن للقائد التالي أن يولد العلامة الأخيرة _last tick_ على سبيل التخمين بمجرد أن يتلقى العلامة قبل الأخيرة _penultimate tick_، حتى قبل التحقق منه.
