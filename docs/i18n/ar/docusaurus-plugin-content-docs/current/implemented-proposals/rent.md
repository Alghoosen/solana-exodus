---
title: تأجير
---

قد يكون للحسابات في Solana حالة يتحكم فيها المالك \(`Account::data`\) مُنفصلة عن رصيد الحساب \(`Account::lamports`\). بما أن المُدقّقين على الشبكة يحتاجون إلى الإحتفاظ بنسخة عملية من هذه الحالة في الذاكرة، تفرض الشبكة رسوما تستند إلى الوقت والمساحة لهذا الإستهلاك من الموارد، تعرف أيضا بإسم الإيجار.

## نظام الإيجار ذو المستويين

تُعفى الحسابات التي تحتفظ برصيد أدنى يعادل سنتين من مدفوعات الإيجار. السنتين _2 years_ مُستمّدة من إنخفاض تكلفة المُعدات بنسبة 50٪ في السعر كل سنتين والتقارب الناتج عن ذلك بسبب كونه سلسلة هندسية. الحسابات التي يقل رصيدها عن هذا الحد يتم تحصيل إيجارها بسعر محدد أثناء عملية التكوين أو Genesis، بإحتساب الـ lamports بمعدل byte لكل سنة. تتقاضى الشبكة الإيجار على أساس كل فترة أو epoch على حدة، في شكل إئتمان للفترة أو الـ epoch التالية، و `Account::rent_epoch` تتبع الإيجار التالي الذي يجب جمعه من الحساب.

في الوقت الراهن، تتحدد تكلفة الإيجار منذ لحظة التكوين أو Genesis. لكن، من المتوقع أن تكون ديناميكية، تعكس تكلفة تخزين المعدات الأساسية في ذلك الوقت. لذا من المُتَوَقَّع عموماً أن ينخفض السعر مع إنخفاض تكلفة المعدّات مع تقدم التكنولوجيا.

## توقيت تحصيل الإيجار

هناك توقيتان لتحصيل الإيجار من الحسابات: \(1\) عند الإشارة إليها بواسطة المعاملة، \(2\) دوريا بمعدل مرة وحدة لكل فترة أو epoch. \(1\) يشمل المعاملة لإنشاء الحساب الجديد نفسه، ويحدث ذلك أثناء عملية التجهيز العادية للمعاملة التي يقوم بها المصرف كجزء من مرحلة التحميل. \(2\) موجود للتأكد من جمع الإيجارات من الحسابات القديمة، والتي لم يتم التأشير عليها على الإطلاق في الفترات الأخيرة. \(2\) يتطلب مسح الحسابات بأكملها ويتم توزيعه على فترة أو epoch بناء على بادئة أو prefix عنوان الحساب لتجنب زيادة التحميل بسبب عملية جمع الإيجار هذه.

على العكس من ذلك، فإن تحصيل الإيجار لا يطبق على الحسابات التي يتم التلاعب بها مباشرة بأي من عمليات مسك الدفاتر على مستوى البروتوكول أو protocol-level bookkeeping، بما في ذلك:

- توزيع الإيجار بنفسه (وإلا فإن ذلك قد يسبب عملية جمع متكررة للإيجار)
- توزيع مكافآت إثبات الحصة أو الstaking في بداية كل فترة أو epoch (لتقليل حجم المعالجة في بداية فترة أو epoch جديدة)
- توزيع رسوم المعاملات في نهاية كل فتحة أو slot

حتى إذا كانت هذه العمليات خارج نطاق تحصيل الإيجار، فإن جميع الحسابات التي يتم التلاعب بها ستتناولها في نهاية المطاف آلية \(2\).

## التجهيز الفعلي لتحصيل الإيجار

الإيجار مستحق لفترة أو epoch واحدة، والحسابات لديها `Account::rent_epoch` من `current_epoch` أو `current_epoch + 1` إعتمادا على نظام الإيجار.

إذا كان الحساب في نظام الإعفاء، `Account::rent_epoch` يتم تحديثه ببساطة إلى `current_epoch`.

إذا كان الحساب غير معفي، يتم إستخدام الفرق بين الفترة التالية و `Account::rent_epoch` لحساب مبلغ الإيجار المستحق على هذا الحساب \(via `Rent::due()`\). أي حسابات lamports كسرية تكون مجتزأة. يتم خصم الإيجار المُستحق من `Account::lamports` و `Account::rent_epoch` يتم تحديثه إلى `current_epoch + 1` (= next epoch). إذا كان مبلغ الإيجار المُستحق أقل من واحد lamport، لا تدخل أي تغييرات على الحساب.

الحسابات التي لا يكفي رصيدها للوفاء بالإيجار المستحق لها ببساطة هي حسابات فشلت في التحميل.

تم تدمير نسبة مئوية من الإيجار الذي تم تحصيله. يتم توزيع الباقي على حسابات التدقيق حسب وزن الحِصَّة، رسوم المُعاملة، في نهاية كل فتحة.

أخيراً، يتم تحصيل الإيجار وفقاً لتحديثات الحساب على مُستوى-البروتوكول مثل توزيع الإيجار على المُدقّقين، بمعنى أنه لا توجد مُعاملة مُقابلة لخصم الإيجار. بالتالي فإن تحصيل الإيجار غير مرئي نوعا ما، ولا يمكن ملاحظته ضمنا إلا من خلال معاملة حديثة أو من خلال توقيت مُحَدَّدَ مُسبقا نظرا لبادئة عنوان الحساب الخاص بها.

## الإعتبارات المتعلقة بالتصميم

### الأساس المنطقي للتصميم الحالي

في إطار التصميم السابق، ليس من الممكن الحصول على حسابات تتباطأ، لا تُلمس أبداً، ولا يتوجب عليها دفع الإيجار. Accounts always pay rent exactly once for each epoch, except rent-exempt, sysvar and executable accounts.

This is an intended design choice. Otherwise, it would be possible to trigger unauthorized rent collection with `Noop` instruction by anyone who may unfairly profit from the rent (a leader at the moment) or save the rent given anticipated fluctuating rent cost.

As another side-effect of this choice, also note that this periodic rent collection effectively forces validators not to store stale accounts into a cold storage optimistically and save the storage cost, which is unfavorable for account owners and may cause transactions on them to stall longer than others. On the flip side, this prevents malicious users from creating significant numbers of garbage accounts, burdening validators.

As the overall consequence of this design, all accounts are stored equally as a validator's working set with the same performance characteristics, reflecting the uniform rent pricing structure.

### المجموعة المخصصة

تم النظر في تحصيل الإيجار حسب الحاجة \(أي كلما تم تحميل/الوصول إلى الحسابات\). المسائل التي ينطوي عليها هذا النهج هي:

- الحسابات المُحمّلة على أنها إئتمانية فقط أو "credit only" لمُعاملة ما يمكن أن يتم توقُّعه بشكل معقول جدا أن يكون الإيجار مُستحقًّا عليها،

  ولكن لن تكون قابلة للكتابة خلال أي معاملة من هذا القبيل

- آلية "التغلب على الشجيرات" أو "beat the bushes" \(أي البحث عن الحسابات التي تحتاج إلى دفع الإيجار\) محبذة،

  تجنبا للحسابات التي يتم تحميلها بشكل غير متكرر تحصل على رحلة مجانية

### تعليمات النظام المتعلقة بجمع الإيجار

جرى النظر في تحصيل الإيجار عن طريق تعليمات للنظام، وبما أنه كان من الطبيعي أن يوزع الإيجار على العُقَد النشطة والمُرَجَّحة بالحِصَّة أو stake-weighted وكان من المُمكن أن يتم ذلك تدريجيا. مع ذلك:

- كان من الممكن أن يؤثر سلبا على إنتاجية الشبكة
- سيتطلب ذلك وضع غلاف خاص في وقت التشغيل، لأن الحسابات مع أصحاب البرامج غير النظامية (non-non-SystemProgram owners) قد تُخصم من هذه التعليمات
- يجب على شخص ما أن يصدر المعاملات
