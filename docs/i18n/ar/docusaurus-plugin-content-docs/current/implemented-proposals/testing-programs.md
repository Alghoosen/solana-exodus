---
title: إختبار البرامج (Testing Programs)
---

تُرسل التطبيقات المُعاملات إلى مجموعة Solana وتستفسر عن المُدقّقين (validators) لتأكيد مُعالجة المُعاملات وللتحقق من نتيجة كل مُعاملة. عندما لا تتصرف المجموعة (cluster) كما هو مُتوقع، فقد يكون ذلك لعدد من الأسباب:

- البرنامج مشوب بالأخطاء
- رفض مُحمّل BPF تعليمات البرنامج غير الآمنة
- المُعاملة كبيرة جداً
- المُعاملة غير صحيحة
- حاول وقت التشغيل تنفيذ المُعاملة عندما كانت مُعاملة أخرى تُحاول الدخول

  نفس الحساب

- أسقطت الشبكة المُعاملة
- تم تدوير المجموعة (cluster) في دفتر الأستاذ (ledger)
- قام المُدقّق (validators) بالرد على الإستفسارات بشكل ضار

## سمات AsyncClient و SyncClient

لإستكشاف الأخطاء وإصلاحها، يجب أن يُعيد التطبيق إستهداف مُكون ذي مستوى أدنى، حيث يكون إحتمال حدوث أخطاء أقل. يُمكن إجراء إعادة الإستهداف بتطبيقات مختلفة لسمات AsyncClient و SyncClient.

تنفذ المُكونات الطرق الأساسية التالية:

```text
trait AsyncClient {
    fn async_send_transaction(&self, transaction: Transaction) -> io::Result<Signature>;
}

trait SyncClient {
    fn get_signature_status(&self, signature: &Signature) -> Result<Option<transaction::Result<()>>>;
}
```

يُرسل المُستخدمون المُعاملات وينتظرون النتائج بشكل غير مُتزامن (asynchrounously) ومُتزامن (synchrounously).

### عميل ThinClient للمجموعات (Clusters)

يستهدف التطبيق ذو المُستوى الأعلى، ThinClient، مجموعة Solana، والتي قد تكون شبكة إختبار مُنتشرة أو مجموعة محلية تعمل على جهاز تطوير.

### عميل TpuClient لـ TPU

المُستوى التالي هو تنفيذ TPU، والذي لم يتم تنفيذه بعد. على مُستوى TPU، يُرسل التطبيق المُعاملات عبر قنوات Rust، حيث لا يُمكن أن يكون هناك مُفاجآت من قوائم إنتظار الشبكة أو الحزم (packets) المُسقطة. يُنفذ TPU جميع أخطاء المُعاملات "العادية". يقوم بالتحقق من التوقيع، وقد يبلغ عن أخطاء الحساب قيد الإستخدام، وبخلاف ذلك ينتج عنه دفتر الأستاذ (ledger)، مُكتمل بإثبات تجزئات التاريخ (proof of history hashes).

## إختبار مُنخفض المُستوى (Low-level testing)

### عميل البنك للبنك (BankClient for the Bank)

يوجد البنك تحت مُستوى TPU. لا يقوم البنك بالتحقق من صحة التوقيع أو إنشاء دفتر الأستاذ (ledger). يُعتبر البنك طبقة (layer) مُلائمة يُمكن من خلالها إختبار البرامج الجديدة على الشبكة (on-chain). يسمح للمُطورين بالتبديل بين تطبيقات البرامج الأصلية والمُتغيرات المُجمعة من BPF. لا حاجة لسمة المُعاملات هنا. واجهة برمجة التطبيقات (API) الخاصة بالبنك مُتزامنة.

## إختبار الوحدة مع وقت التشغيل (Unit-testing with the Runtime)

أدناه، البنك هو وقت التشغيل. وقت التشغيل هو بيئة الإختبار المثالية لإختبار الوحدة. من خلال ربط وقت التشغيل بشكل ثابت بتطبيق برنامج أصلي، يكتسب المُطور أقصر حلقة مُمكنة للتحرير والترجمة والتشغيل (edit-compile-run). بدون أي إرتباط ديناميكي، تتضمن تتبعات المُكدس (stack) رموز تصحيح الأخطاء وتكون أخطاء البرنامج مُباشرة لإستكشاف الأخطاء وإصلاحها.
