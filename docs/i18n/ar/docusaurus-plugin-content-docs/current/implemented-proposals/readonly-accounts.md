---
title: حسابات القراءة فقط (Read-Only Accounts)
---

يُغطي هذا التصميم التعامل مع الحسابات للقراءة فقط (readonly) والقابلة للكتابة في وقت التشغيل [runtime](../validator/runtime.md). يجب مُعالجة المُعاملات المُتعددة التي تقوم بتعديل نفس الحساب بشكل تسلسلي بحيث يتم إعادتها دائمًا بنفس الترتيب. خلاف ذلك، قد يُؤدي هذا إلى عدم الحتمية في دفتر الأستاذ (ledger). مع ذلك، فإن بعض المُعاملات تحتاج فقط إلى قراءة البيانات في حسابات مُعينة وليس تعديلها. يُمكن مُعالجة المُعاملات المُتعددة التي تقرأ نفس الحساب فقط بشكل مُتوازٍ، نظرًا لأن أمر الإعادة لا يهم، مما يوفر ميزة الأداء.

من أجل تحديد حسابات القراءة فقط (readonly accounts)، تحتوي بنية عنوان الرسالة (MessageHeader) على `num_readonly_signed_accounts` و `num_readonly_unsigned_accounts`. يتم تضمين تعليمات مُعرف البرنامج `program_ids` في ناقل الحساب كحسابات غير مُوقعة للقراءة فقط، حيث لا يُمكن تعديل الحسابات القابلة للتنفيذ بالمثل أثناء مُعالجة التعليمات.

## مُعالجة وقت التشغيل (Runtime handling)

تحتاج قواعد مُعالجة المُعاملات في وقت التشغيل إلى تحديث طفيف. لا تزال البرامج غير قادرة على كتابة أو إنفاق حسابات لا تمتلكها. لكن قواعد وقت التشغيل الجديدة تضمن عدم إمكانية تعديل الحسابات للقراءة فقط، حتى من خلال البرامج التي تمتلكها.

تمتلك حسابات القراءة فقط الخاصية التالية:

- وصول للقراءة فقط إلى جميع حقول الحساب، بما في ذلك الـ lamports (لا يمكن إضافتها أو خصمها) وبيانات الحساب

ستفشل التعليمات الخاصة بالإيداع في حساب القراءة فقط أو الخصم منه أو تعديله.

## تحسينات قفل الحساب (Account Lock Optimizations)

تتعقب وحدة الحسابات الحسابات المُقفلة الحالية في وقت التشغيل، والتي تفصل حسابات القراءة فقط (readonly accounts) عن الحسابات القابلة للكتابة (writable accounts). يمنح قفل الحساب الإفتراضي حساب ما تعيين "قابلية الكتابة" ، ولا يُمكن الوصول إليه إلا من خلال عملية جزئية (thread) مُعالجة واحدة في في كل مرة. يتم قفل الحسابات للقراءة فقط بواسطة آلية مُنفصلة، مما يسمح بالقراءة المُتوازية.

على الرغم من عدم تنفيذها بعد، يُمكن تخزين حسابات القراءة فقط مُؤقتًا في الذاكرة ومُشاركتها بين جميع العمليات الجزئية (thread) التي تُنفذ المُعاملات. سيحتفظ التصميم المثالي بذاكرة التخزين المُؤقت هذه بينما تتم الإشارة إلى حساب القراءة فقط من خلال أي مُعاملة تتحرك خلال وقت التشغيل، وتحرير ذاكرة التخزين المُؤقت عندما تنتهي المُعاملة الأخيرة من وقت التشغيل.

يُمكن أيضًا تمرير حسابات القراءة فقط إلى المُعالج كمراجع، مع توفير نسخة إضافية.
