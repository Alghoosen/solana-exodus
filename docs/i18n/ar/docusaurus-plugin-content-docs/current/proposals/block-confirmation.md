---
title: إثبات أو تأكيد الكتلة (Block Confirmation)
---

يُصوت المُدقّق (validator) على تجزئة (hash) الـ PoH لغرضين. أولاً، يُشير التصويت إلى أنه يعتقد أن دفتر الأستاذ (ledger) صالح حتى تلك النقطة الزمنية. ثانيًا، نظرًا لأن العديد من الإنقسامات أو الشوكات (forks) الصالحة قد توجد على إرتفاع مُعين، فإن التصويت يُشير أيضًا إلى الدعم الحصري للإنقسام أو الشوكة. يصف هذا المُستند السابق فقط. هذا الأخير موصوف في [Tower BFT](../implemented-proposals/tower-bft.md).

## التصميم الحالي (Current Design)

لبدء التصويت، يقوم المُدقّق (validator) أولاً بتسجيل الحساب الذي سيُرسل أصواته إليه. ثم يُرسل أصواتًا إلى هذا الحساب. يحتوي التصويت على علامة (tick) إرتفاع الكتلة (block) التي يُصوت عليها. يُخزن الحساب أعلى 32 إرتفاعًا.

### المشاكل (Problems)

- المُدقّق (validator) وحده يعرف كيف يجد أصواته مُباشرة.

  تحتاج المُكونات الأخرى، مثل المُكون الذي يحسب وقت التأكيد، إلى أن يتم دمجها في كود المُدقّق (validator). يستعلم التعليمات البرمجية (code) للمُدقّق (validator) من البنك عن جميع الحسابات المملوكة لبرنامج التصويت (vote program).

- لا تحتوي بطاقات الإقتراع على تجزئة (hash) الـ PoH. يُصوت المُدقّق (validator) فقط على أنه لاحظ وجود كتلة (block) عشوائية على إرتفاع ما.

- لا تحتوي بطاقات الإقتراع على تجزئة (hash) حالة البنك. بدون هذا التجزئة (hash)، لا يوجد دليل على أن المُدقّق (validator) نفذ المُعاملات والتحقق من عدم وجود إنفاق مزدوج (double spends).

## التصميم المُقترح (Proposed Design)

### لا توجد حالة كتل-مُتقاطعة في البداية (No Cross-block State Initially)

في اللحظة التي يتم فيها إنتاج الكتلة (block)، يجب على القائد (leader) إضافة مُعاملة كتلة جديدة (NewBlock) إلى دفتر الأستاذ (ledger) بعدد من الرموز التي تُمثل مُكافأة التحقق من الصحة. إنها بشكل فعال مُعاملة multisig تزايدية تُرسل الرموز من مُجمع التعدين (mining pool) إلى المُدقّق (validator). يجب أن يُخصص الحساب مساحة كافية فقط لجمع الأصوات المطلوبة لتحقيق أغلبية عظمى (supermajority). عندما يُراقب المُدقّق (validator) مُعاملة كتلة جديدة (NewBlock)، يكون لديه خيار إرسال تصويت يتضمن تجزئة (hash) لحالة دفتر الأستاذ (ledger) الخاص به (حالة البنك). بمجرد حصول الحساب على أصوات كافية، يجب على برنامج التصويت (vote program) توزيع الرموز على المُدقّقين (validators)، مما يُؤدي إلى حذف الحساب.

#### وقت تأكيد التسجيل (Logging Confirmation Time)

سيحتاج البنك إلى أن يكون على علم ببرنامج التصويت (vote program). بعد كل مُعاملة، يجب أن تتحقق مما إذا كانت مُعاملة تصويت وإذا كان الأمر كذلك، تحقق من حالة هذا الحساب. إذا تسببت المُعاملة في تحقيق الأغلبية العظمى (supermajority)، فيجب تسجيل الوقت منذ تقديم مُعاملة الكتلة الجديدة (NewBlock).

### وقت تأكيد المُعاملات والمدفوعات (Finality and Payouts)

[Tower BFT](../implemented-proposals/tower-bft.md) هي خوارزمية إختيار الإنقسام أو الشوكة (fork) المُقترحة. يقترح تأجيل الدفع للمُعدنين (miners) حتى تصل أصوات المُدققين _stack_ إلى عمق مُعين، وعند هذه النقطة لا يكون التراجع مجديًا إقتصاديًا. بالتالي فإن برنامج التصويت قد يُنفذ الـ Tower BFT. يجب أن تُشير تعليمات التصويت إلى حساب الـ Tower العام حتى يتمكن من تتبع حالة الكتل المُتقاطعة (cross-block).

## التحديات (Challenges)

### التصويت على الشبكة (On-chain voting)

إستخدام البرامج والحسابات لتنفيذ هذا أمر شاق بعض الشيء. الجزء الأصعب هو معرفة مقدار المساحة التي يجب تخصيصها في الكتلة الجديدة (NewBlock). المُتغيرين هما المجموعة نشطة _active set_ ومخاطر تلك المُدقّقات (validators). إذا قُمنا بحساب المجموعة النشطة في وقت تقديم الكتلة الجديدة (NewBlock)، فإن عدد المُدقّقين (validators) لتخصيص مساحة لهم معروف مُقدمًا. مع ذلك، إذا سمحنا للمُدقّقين (validators) الجدد بالتصويت على الكتل (blocks) القديمة، فسنحتاج إلى طريقة لتخصيص المساحة ديناميكيًا.

على نحو مُشابه من حيث الروح، إذا قام القائد بتخزين ذاكرة مُؤقت في وقت الكتلة الجديدة (NewBlock)، فلن يحتاج برنامج التصويت (vote program) إلى التفاعل مع البنك عند مُعالجة الأصوات. إذا لم نفعل ذلك، فلدينا خيار السماح بتعويم الحِصَص (stakes) حتى يتم تقديم التصويت. يُمكن أن يُشير المُدقّق (validator) إلى حساب إثبات الحِصَّة أو التَّحْصِيص (staking) الخاص به، ولكن هذا سيكون قيمة الحساب الجاري بدلاً من قيمة الحساب لآخر حالة بنكية تم الإنتهاء منها. لا يقدم البنك حاليًا وسيلة للإشارة إلى الحسابات من نقاط زمنية مُعينة.

### تأثيرات التصويت على الكتل السابقة (Voting Implications on Previous Blocks)

هل التصويت على إرتفاع واحد يعني تصويتًا على جميع الكتل (blocks) ذات الإرتفاعات المُنخفضة لذلك الإنقسام أو الشوكة (fork)؟ إذا حدث ذلك، فسنحتاج إلى طريقة للبحث عن حسابات جميع الكتل (blocks) التي لم تصل بعد إلى الأغلبية العظمى (supermajority). إذا لم يكن الأمر كذلك، يُمكن لمُدقّق (validator) إرسال الأصوات إلى جميع الكتل (blocks) بشكل صريح للحصول على مُكافآت الكتلة.
