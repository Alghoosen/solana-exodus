---
title: التأكيد المُتفائل والإقتطاع (Optimistic Confirmation and Slashing)
---

يُمكن تتبع التقدم المُحرز في التأكيد المُتفائل هنا

https://github.com/solana-labs/solana/projects/52

في نهاية شهر مايو، تنتقل الشبكة التجريبية الرئيسية (Mainnet Beta) إلى الإصدار 1.1، و تنتقل الشبكة التجريبية (testnet) إلى الإصدار 1.2. مع الإصدار 1.2، سوف تتصرف الشبكة التجريبية (testnet) كما لو كان لها وقت إثبات مُعاملة (Finality) مُتفائل طالما أن نسبة المُدقّقين (validators) الذين يتصرفون بشكل ضار لا تتجاوز 4.66 ٪. يمكن للتطبيقات أن تفترض أن 2/3 + الأصوات التي لوحظت في القيل والقال (gossip) تُؤكد وجود كتلة (block) أو أن 4.66 ٪ على الأقل من الشبكة تنتهك البروتوكول.

## كيف يعمل هذا الأمر؟

الفكرة العامة هي أن المُدقّقين (validators) يجب أن يستمروا في التصويت بعد آخر إنقسام أو شوكة (fork)، ما لم يتمكن المُدقّق من بناء دليل على أن الإنقسام أو الشوكة الحالية قد لا تصل إلى نهايتها. الطريقة التي يبني بها المُدقّقون (validators) هذا الدليل هي من خلال جمع الأصوات لجميع الإنقسامات أو الشوكات (forks) بإستثناء الخاصة بهم. إذا كانت مجموعة الأصوات الصالحة تمثل أكثر من 1/3+X من وزن حِصَّة (stake) الفترة (epoch)، فقد لا تكون هناك طريقة لوصول الإنقسام أو الشوكة (fork) الحالية للمُدقّقين (validators) إلى 2/3+ من وقت إثبات المُعاملة (Finality). يقوم المُدقّق (validator) بتجزئة (hashes) الإثبات (ينشئ شاهدًا) ويُقدمه مع تصويته للإنقسام أو الشوكة (fork) البديلة. لكن إذا صوت 2/3+ لنفس الكتلة (block)، فمن المُستحيل لأي من المُدقّقين (validators) إنشاء هذا الإثبات، وبالتالي لا يُمكن لأي مُدقّق تبديل الإنقسامات أو الشوكات (forks) وسيتم الإنتهاء من هذه الكتلة (block) في النهاية.

## المُفاضلات (Tradeoffs)

هامش الأمان هو 1/3+X، حيث يُمثل X الحد الأدنى من الحِصَّة (stake) الذي سيتم تخفيضها في حالة إنتهاك البروتوكول. والمُقايضة هي أن الحيوية تنخفض الآن بمقدار الضعفين (2X) في أسوأ الحالات. إذا كان أكثر من 1/3 - 2X من الشبكة غير مُتوفر، فقد تتوقف الشبكة وستستأنف إنهاء الكتل (blocks) فقط بعد أن تسترد الشبكة أقل من 1/3 - 2X من العُقد (nodes) الفاشلة. حتى الآن، لم نلاحظ حدوث عدم توافر (unavailability) كبير على شبكتنا الرئيسية، أو cosmos، أو tezos. بالنسبة لشبكتنا، التي تتكون أساسًا من أنظمة توافر (availability) عالية، يبدو هذا غير مرجح. قُمنا حاليًا بتعيين نسبة الحد الأدنى إلى 4.66٪، مما يعني أنه في حالة فشل 23.68٪، فقد تتوقف الشبكة عن إنهاء الكتل (blocks). بالنسبة لشبكتنا، التي تتكون أساسًا من أنظمة عالية التوافر (availability)، يبدو أن الإنخفاض في التوافر بنسبة 23.68٪ غير مُرتبط. إحتمالات 1:10^12 بإفتراض وجود خمس عُقد تحْصِيص (staked nodes) بنسبة 4.7٪ مع 0.995 وقت تشغيل.

## الأمن (Security)

كان مُتوسط الأصوات على المدى الطويل لكل خانة 670.000.000 صوت / 12.000.000 فُتحة (Slot)، أو 55 من أصل 64 مُدقّقي تصويت (voting validators). يتضمن ذلك الكتل التي تم تفويتها (blocks) بسبب فشل المُنتج. عندما يرى العميل 55/64، أو 86٪ تقريبًا يُؤكد الكتلة (block)، يُمكنه توقع 24٪ تقريبًا أو `(86 - 66.666.. + 4.666..)٪ ` من الشبكة يجب أن يتم خفضه حتى تفشل هذه الكتلة (block) في الوصول إلى الصيغه النهائيه.

## لماذا Solana؟

يُمكن بناء هذا النهج على شبكات أخرى، ولكن يتم تقليل تعقيد التنفيذ بشكل كبير على Solana لأن أصواتنا لها مُهلات تستند إلى VDF يُمكن إثباتها. ليس من الواضح ما إذا كان تبديل الإثباتات يُمكن بناؤه بسهولة في شبكات ذات إفتراضات ضعيفة حول الوقت.

## خريطة طريق الإقتطاع (Slashing roadmap)

يُعد الإقتطاع (slashing) مُشكلة صعبة، ويُصبح الأمر أكثر صعوبة عندما يكون هدف الشبكة هو الحصول على أقل زمن إنتقال مُمكن. تظهر المُفاضلات (tradeoffs) بشكل خاص عند تحسين زمن الوصول. على سبيل المثال، بشكل مثالي يجب على المُدقّقين (validators) الإدلاء بأصواتهم ونشرها قبل مُزامنة الذاكرة مع القرص، مما يعني أن مخاطر فساد الحالة المحلية أعلى بكثير.

بشكل أساسي، هدفنا هو القطع بنسبة 100٪ مع الحالات التي تُحاول فيها العُقدة (node) بشكل ضار إنتهاك قواعد الأمان و 0٪ أثناء التشغيل الروتيني. كيف نهدف إلى تحقيق ذلك هو تنفيذ أدلة الإقتطاع (slashing) أولاً دون أي إقتطاع تلقائي على الإطلاق.

في الوقت الحالي، للحصول على إجماع (consensus) منتظم، بعد إنتهاك السلامة، فإن الشبكة ستتوقف. يُمكننا تحليل البيانات ومعرفة من المسؤول وإقتراح خفض الحِصَّة (stake) بعد إعادة التشغيل. سيتم إستخدام نهج مُماثل مع إعدادات (conf) مُتفائلة. يمكن مُلاحظة إنتهاك سلامة الإعدادات (conf) المُتفائلة بسهولة، ولكن في ظل الظروف العادية، قد لا يُؤدي إنتهاك تأكيد الأمان المُتفائل إلى إيقاف الشبكة. بمجرد مُلاحظة الإنتهاك، سيقوم المُدقّقون (validators) بتجميد الحِصَّة (stake) المُتأثرة في الفترة (epoch) التالية وسيُقررون الترقية التالية إذا تطلب الإنتهاك الإقتطاع (slashing).

على المدى الطويل، يجب أن تكون المُعاملات قادرة على إسترداد جزء من ضمان الإقتطاع (slashing) إذا ثبت إنتهاك السلامة المُتفائل. في هذا السيناريو، يتم تأمين كل كتلة (block) بشكل فعال بواسطة الشبكة.
