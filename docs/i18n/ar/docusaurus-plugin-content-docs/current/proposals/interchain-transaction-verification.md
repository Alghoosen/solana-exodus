---
title: التحقق من المُعاملات عبر الشبكة (Inter-chain Transaction Verification)
---

## المُشكل (Problem)

التطبيقات عبر الشبكة (Inter-chain) ليست جديدة على النظام البيئي للأصول الرقمية؛ في الواقع، حتى منصات التداول المركزية (centralized exchanges) الأصغر لا تزال تُقزِّم بشكل قاطع جميع تطبيقات الشبكة الأُحادية (single chain) مُجتمعة من حيث المُستخدمين والحجم. إنهم يحصلون على تقييمات ضخمة وقد أمضوا سنوات في تحسين مُنتجاتهم الأساسية بشكل فعال لمجموعة واسعة من المُستخدمين النهائيين. مع ذلك، تتمحور عملياتهم الأساسية حول الآليات التي تتطلب من المُستخدمين أن يثقوا بها من جانب واحد، وعادة ما يكون ذلك مع القليل من اللجوء أو الحماية من الخسارة العرضية. قد أدى ذلك إلى كسر النظام البيئي الأوسع للأصول الرقمية على طول خطوط الشبكة لأن حلول التشغيل البيني (interoperability) عادةً:

- مُعقدة من الناحية الفنية للتنفيذ الكامل
- إنشاء شبكة غير مُستقرة لهياكل الحوافز على نطاق واسع
- تتطلب تعاونًا مُتسقًا وعالي المُستوى بين حاملي الحِصَّة (Stakeholders)

## الحل المُقترح

نظام تحقق بسيط من الدفع (Simple Payment Verification\(SPV\) هو مُصطلح عام لمجموعة من المنهجيات المُختلفة التي يستخدمها العملاء الخفيفون (light clients) على مُعظم شبكات البلوكشاين الرئيسية للتحقق من جوانب حالة الشبكة دون عبء التخزين الكامل للشبكة نفسها وصيانتها. في مُعظم الحالات، يعني هذا الإعتماد على شكل من أشكال تجزئة الشجرة (hash tree) لتقديم دليل على وجود مُعاملة مُعينة في كتلة (block) مُعينة من خلال المُقارنة مع تجزئة الجذر (root hash) في رأس تلك الكتلة (block) أو ما يُعادلها. يسمح هذا للعميل الخفيف (light client) أو المحفظة بالوصول إلى مُستوى إحتمالي من اليقين حول الأحداث على الشبكة بحد أدنى من الثقة المطلوبة فيما يتعلق يعُقد (nodes) الشبكة.

تقليديًا، تتم عملية تجميع هذه الأدلة والتحقق منها خارج الشبكة عن طريق العُقد (nodes) أو المحافظ أو عملاء آخرين، ولكنها توفر أيضًا آلية مُحتملة للتحقق من الحالة عبر الشبكة (Inter-chain). مع ذلك، من خلال نقل القدرة على التحقق من صحة إثباتات الـ SPV على الشبكة (On-Chain) كعقد ذكي (smart contract) مع الإستفادة من الخصائص الأرشيفية المُتأصلة في البلوكشاين، من المُمكن إنشاء نظام للكشف والتحقق من المُعاملات على الشبكات الأخرى برمجيًا دون مُشاركة أي نوع من أوراكل (oracle) موثوق به أو آلية إجماع (consensus) مُتعددة المراحل ومُعقدة. هذا المفهوم قابل للتعميم على نطاق واسع لأي شبكة بها آلية SPV ويُمكن حتى تشغيلها بشكل ثنائي على منصات عقود ذكية (smart contracts) أخرى، مما يفتح إمكانية نقل قيمة رخيصة وسريعة عبر الشبكات (Inter-chain) دون الإعتماد على الضمانات أو أقفال التجزئة (hashlocks) أو الوسطاء الموثوق بهم.

إن إختيار الإستفادة من الآليات الراسخة والمُستقرة من الناحية التنموية الشائعة بالفعل في جميع شبكات البلوكشاين الرئيسية يسمح لحلول التشغيل البيني (interoperability) القائمة على الـ SPV أن تكون أبسط بشكل كبير من الأساليب المُنظمة والمُتعددة المراحل. كجزء من هذا، فإنهم يستغنون عن الحاجة إلى معايير إتصال عبر الشبكة (Inter-chain) مُتفق عليها على نطاق واسع والمُنظمات الكبيرة مُتعددة الأطراف التي تكتبها لصالح مجموعة من الخدمات القائمة على العقود المُنفصلة التي يُمكن إستخدامها بسهولة من خلال عقود المُتَّصِل (caller) من خلال تنسيق التجريد المُشترك. سيُؤدي ذلك إلى وضع الأساس لمجموعة واسعة من التطبيقات والعقود القادرة على التشغيل البيني (interoperate) عبر نظام بيئي مُتنوع وكل نظام بيئي مُتنامي.

## المُصطلحات (Terminology)

برنامج SPV أو SPV Program - واجهة مُواجهة العميل (Client-facing interface) لنظام SPV عبر الشبكة (Inter-chain)، تُدير أدوار المُشاركين. مُحرك SPV - يتحقق من صحة إثباتات المُعاملات، وهي مجموعة فرعية من برنامج SPV. العميل - المُتَّصِل (caller) ببرنامج SPV، عادةً ما يكون عقد solana آخر. المُتثبِّت (Prover) - الطرف الذي يُنشئ البراهين للمُعاملات ويُقدمها إلى برنامج SPV. إثبات المُعاملة - الذي تم إنشاؤه بواسطة المُتثبِّتين (Provers)، يحتوي على إثباتات merkle والمُعاملات ومرجع رأس الكتلة (blockheader). إثبات Merkle أو Merkle Proof - إثبات SPV الأساسي الذي يتحقق من وجود مُعاملة في كتلة (block) مُعينة. رأس الكتلة (Block Header) - يمثل المُعلمات (parameters) الأساسية والموضع النسبي لكتلة (block) مُعينة. طلب إثبات (Proof Request) - طلب مُقدم من العميل للتحقق من المُعاملة \(المعاملات\) بواسطة المُتثبِّتين (Provers). مخزن الرأس (Header Store) - هيكل بيانات للتخزين والإشارة إلى نطاقات رؤوس الكتل (block headers) في الإثباتات. طلب العميل (Client Request) - مُعاملة من العميل إلى برنامج SPV لبدء إنشاء طلب إثبات (Proof Request). حساب فرعي (Sub-account) - حساب Solana مملوك لحساب عقد آخر، بدون مفتاحه الخاص (private key).

## الخدمة (Service)

تعمل برامج SPV كعقود مُنتشرة على شبكة Solana وتُحافظ على نوع من الأسواق العامة لإثباتات SPV التي تسمح لأي طرف بإرسال طلبات الإثبات وكذلك الإثباتات نفسها للتحقق إستجابة للطلبات. سيكون هناك العديد من مثيلات برنامج SPV نشطة في أي وقت مُحدد، واحدة على الأقل لكل شبكة خارجية مُتصلة ومن المُحتمل أن تكون مثيلات (instances) مُتعددة لكل شبكة. ستكون مثيلات (instances) برنامج SPV مُتسقة نسبيًا في واجهة برمجة التطبيقات (API) عالية المُستوى ومجموعات الميزات مع بعض الإختلاف بين عملات المنصات \(Bitcoin و Litecoin \) ومنصات العقود الذكية (smart contract platforms) نظرًا لإمكانية التحقق من تغييرات حالة الشبكة بما يتجاوز مُجرد المُعاملات. في كل حالة بغض النظر عن الشبكة، يعتمد برنامج SPV على مُكون داخلي يُسمى مُحرك SPV لتوفير التحقق بدون حالة إثباتات SPV الفعلية التي يتم البناء عليها لكل من ميزات واجهة العميل (client facing features) ذات المُستوى الأعلى وواجهة برمجة التطبيقات (API). يتطلب مُحرك SPV تطبيقًا خاصًا بالشبكة، ولكنه يسمح بسهولة تمديد النظام البيئي الأكبر عبر الشبكة (Inter-chain) من قبل أي فريق يختار تنفيذ هذا التنفيذ وإفلاته في برنامج SPV القياسي للنشر.

لأغراض طلبات الإثبات (Proof Requests)، يُشار إلى مُقدم الطلب بإسم عميل البرنامج (program client)، والذي سيكون في مُعظم الحالات، إن لم يكن جميع الحالات، عقد Solana آخر. يُمكن للعميل إختيار تقديم طلب يتعلق بمُعاملة مُعينة أو تضمين عامل تصفية أوسع يمكن تطبيقه على أي مجموعة من مُعلِّمات (parameters) المُعاملة بما في ذلك المُدخلات (inputs) والمُخرجات (outputs) والمبلغ. على سبيل المثال، يُمكن للعميل تقديم طلب لأي مُعاملة يتم إرسالها من عنوان مُعين A إلى العنوان B بالمبلغ X بعد وقت مُعين. يمكن إستخدام هذا الهيكل في مجموعة من التطبيقات، مثل التحقق من دفعة مُحددة مقصودة في حالة المُقايضة الذرية (atomic swap) أو الكشف عن حركة الأصول الضمانية للقرض.

بعد تقديم طلب العميل (Client Request)، بإفتراض أنه تم التحقق من صحته بنجاح، يتم إنشاء حساب طلب إثبات (proof request account) بواسطة برنامج SPV لتتبع تقدم الطلب. يستخدم المُتثبِّتون (Provers) الحساب لتحديد الطلب الذي يعتزمون ملء الأدلة التي يُقدمونها للتحقق، وعند هذه النقطة يتحقق برنامج SPV من صحة تلك الإثباتات، وفي حالة نجاحها، يحفظها في بيانات حساب حساب الطلب (request account). يُمكن للعملاء مُراقبة حالة طلباتهم والإطلاع على أي مُعاملات قابلة للتطبيق جنبًا إلى جنب مع إثباتاتهم من خلال الإستعلام عن بيانات الحساب لحساب الطلب. في التكرارات المُستقبلية عندما تدعمها Solana، سيتم تبسيط هذه العملية من خلال عقود تنشر الأحداث بدلاً من طلب عملية أسلوب الإقتراع كما هو مُوضح.

## التنفيذ (Implementation)

تتكون آلية عبر الشبكة (Inter-chain) الخاصة بـ SPV في Solana من المُكونات والمُشاركين التاليين:

### محرك SPV أو SPV engine

عقد تم نشره على Solana يتحقق بدون حالة من أدلة SPV للمُتَّصِل (caller). يأخذ كحجج للتحقق من الصحة:

- إثبات SPV أو SPV proof بالتنسيق الصحيح للبلوكشاين المُرتبط بالبرنامج
- قم بالرجوع إلى \(s\) رؤوس الكتل (block headers) ذات الصلة لمُقارنة هذا الإثبات
- المُعلمات (parameters) الضرورية للمُعاملة التي سيتم التحقق منها

  إذا تم التحقق من صحة الإثبات المعني بالأمر بنجاح، يقوم برنامج SPV بحفظ دليل

  ذلك التحقق إلى حساب الطلب (request account)، والذي يُمكن للمُتَّصِل (caller) حفظه في

  بيانات حسابه أو التعامل معه بطريقة أخرى حسب الضرورة. تعرض برامج SPV أيضا

  المرافق والهياكل المُستخدمة في التمثيل والتحقق من صحة الرؤوس

  والمُعاملات والتجزئة (hash) وما إلى ذلك على أساس شبكة تلو الأخرى.

### برنامج SPV أو SPV program

عقد تم نشره في Solana ينسق ويتوسط التفاعل بين العملاء (Clients) والمُثبِّتين (Provers) ويدير التحقق من صحة الطلبات (requests) والرؤوس (headers) والإثباتات (proofs) وما إلى ذلك. إنها نقطة الوصول الأساسية لعقود العملاء للوصول إلى عبر الشبكة (Inter-chain). آلية SPV أو SPV mechanism. تُقدم الميزات الأساسية التالية:

- إرسال طلب إثبات (Proof Request) - يسمح للعميل بتقديم طلب لإثبات مُحدد أو مجموعة من الإثباتات
- إلغاء طلب إثبات (Cancel Proof Request) - يسمح للعميل بإبطال طلب مُعلق
- طلب إثبات الملء (Fill Proof Request) - يستخدمه المُتثبِّتون (Provers) لتقديم إثبات للتحقق من صحته يتوافق مع طلب إثبات مُعين

  يحتفظ برنامج SPV بقائمة مُتاحة للجمهور من الإثبات المُعلق الصالح

  الطلبات في بيانات حسابها لصالح مُقدمي الخدمة الذين يُراقبونها و

  ويُرفقون مراجع للطلبات المُستهدفة مع الإثباتات المُقدمة منهم.

### طلب إثبات (Proof Request)

رسالة يُرسلها العميل إلى مُحرك SPV تُشير إلى طلب إثبات لمُعاملة مُعينة أو مجموعة مُعاملات. يُمكن لطلبات الإثبات (Proof Requests) إما تحديد مُعاملة مُعينة يدويًا عن طريق التجزئة (hash) الخاصة بها أو يُمكن أن تختار إرسال عامل تصفية (filter) يُطابق مُعاملات مُتعددة أو فئات من المُعاملات. على سبيل المثال، يُمكن إستخدام عامل تصفية (filter) يُطابق "أي مُعاملة من العنوان xxx إلى العنوان yyy" لإكتشاف سداد دين أو تسوية مُقايضة عبر الشبكة (Inter-chain). بالمثل، يُمكن إستخدام عامل تصفية (filter) يُطابق "أي مُعاملة من العنوان xxx" من خلال عقد إقراض أو عقد سك رمز إصطناعي (synthetic token minting) لمُراقبة التغييرات في الضمانات والإستجابة لها. يتم إرسال طلبات الإثبات مُقابل رسوم، يتم صرفها من خلال عقد مُحرك SPV إلى المُثبِّت (Prover) المُناسب بمجرد التحقق من صحة إثبات يطابق هذا الطلب.

### كتاب الطلبات (Request Book)

القائمة العامة لطلبات الإثبات (Proof Requests) الصالحة والمفتوحة المُتاحة للإثبات لملئها أو للعملاء لإلغائها. يشبه تقريبًا دفتر الطلبات في منصة التداول (exchange)، ولكن بنوع واحد من القائمة بدلاً من جانبين مُنفصلين. يتم تخزينها في بيانات حساب برنامج SPV.

### الإثباتات (Proof)

دليل على وجود مُعاملة مُعينة في البلوكشاين المقصودة. تشمل البراهين كلاً من برهان Merkle الفعلي والمرجع \(s\) إلى شبكة رؤوس كتل (block headers) مُتسلسلة صالحة. يتم إنشاؤها وإرسالها بواسطة Provers وفقًا لمُواصفات طلبات الإثبات (Proof Requests) المُتاحة للجمهور والمُستضافة في كتاب الطلب بواسطة برنامج SPV. عند التحقق من الصحة، يتم حفظها في بيانات الحساب الخاصة بطلب الإثبات ذي الصلة، والذي يُمكن للعميل إستخدامه لمُراقبة حالة الطلب.

### العميل (Client)

مُنشئ طلب إثبات المُعاملة (transaction proof). غالبًا ما يكون العملاء عقودًا أخرى كأجزاء من التطبيقات أو مُنتجات مالية مُحددة مثل القروض (loans) والمُقايضات (swaps) والضمان (escrow) وما إلى ذلك. يقوم العميل في أي دورة عملية تحقق مُعينة بتقديم طلب العميل (ClientRequest) مبدئيًا والذي يبلغ المُعلمات (parameters) والرسوم (fee)، وإذا تم التحقق من صحته بنجاح، يُؤدي إلى إنشاء حساب طلب إثبات (Proof Request account) بواسطة برنامج SPV. يجوز للعميل أيضًا تقديم إلغاء الطلب (CancelRequest) للإشارة إلى طلب إثبات (Proof Request) نشط للإشارة إليه على أنه غير صالح لأغراض تقديم الإثبات.

### المُثبِّت (Prover)

مُقدم إثبات يملأ طلب إثبات (Proof Request). يقوم المُثبِّتون (Provers) بمُراقبة دفتر الطلبات الخاص ببرنامج SPV لطلبات الإثبات (Proof Requests) المُعلقة وإنشاء الإثباتات المُطابقة التي يُرسلونها إلى برنامج SPV للتحقق من صحتها. إذا تم قبول الدليل، فسيتم دفع الرسوم المُرتبطة بطلب الإثبات المعني إلى المُثبِّت (Prover). تعمل الأمثال عادةً كعُقد (nodes) كتلة بث (Blockstreamer) لـSolana التي يُمكنها أيضًا الوصول إلى عُقدة الـ Bitcoin، والتي يستخدمونها لأغراض إنشاء الإثباتات والوصول إلى رؤوس الكتلة (block headers).

### مخزن الرأس (Header Store)

بنية بيانات قائمة على الحساب تُستخدم للإحتفاظ برؤوس الكتل (block headers) بغرض التضمين في البراهين المُرسلة بالرجوع إلى حساب مخزن الرأس (header store account). يمكن الإحتفاظ بمخازن الرأس (header stores) بواسطة كيانات مُستقلة، نظرًا لأن التحقق من صحة رأس الشبكة هو أحد مُكونات آلية التحقق من صحة برنامج SPV. يتم تقسيم الرسوم التي يتم دفعها بواسطة طلبات الإثبات (Proof Requests) إلى المُتثبِّتين (Provers) بين مقدم إثبات Merkle نفسه ومُخزن الرأس المُشار إليه في الإثبات المُقدم. نظرًا لعدم القدرة الحالية على زيادة سعة بيانات الحساب المُخصصة بالفعل، تتطلب حالة الإستخدام بنية بيانات يُمكن أن تنمو إلى أجل غير مُسمى دون إعادة التوازن. الحسابات الفرعية هي حسابات مملوكة لبرنامج SPV بدون مفاتيح خاصة بها يتم إستخدامها للتخزين عن طريق تخصيص رؤوس الكتلة (blockheaders) لبيانات حساباتهم. تُعد الأساليب المُحتملة المُتعددة لتنفيذ نظام مخزن الرأس (Header Store) مُمكنة:

مخزن الرؤوس (Store Headers) في الحسابات الفرعية للبرنامج المُفهرسة حسب العنوان العام (Public address):

- يحتوي كل حساب فرعي على رأس واحد وله مفتاح عمومي (public key) يُطابق تجزئة الكتلة (Blockhash)
- يتطلب نفس عدد عمليات البحث عن بيانات الحساب مثل التأكيدات لكل عملية تحقق
- تحديد عدد التأكيدات \(15-20\) عبر الحد الأقصى لبيانات المُعاملة
- لا يُوجد تكرار على مُستوى الشبكة للرؤوس الفردية

قائمة مُرتبطة بالعديد من الحسابات الفرعية التي تُخزن الرؤوس:

- الإحتفاظ بالفهرس المتسلسل لحسابات التخزين، العديد من الرؤوس لكل حساب تخزين
- عمليات البحث عن بيانات الحساب بحد أقصى 2 لـ & Gt &gt;99.9% من عمليات التحقق \(1 للأغلبية\)
- يسمح تنسيق عنوان البيانات التسلسلي المضغوط بأي عدد من التأكيدات وعمليات البحث السريعة
- تسهيل إزدواجية الرأس على مُستوى الشبكة
