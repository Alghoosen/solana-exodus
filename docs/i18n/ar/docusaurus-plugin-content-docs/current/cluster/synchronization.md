---
title: المُزامنة (Synchronization)
---

المُزامنة (synchronization) السريعة والموثوق بها هي السبب الأكبر في أن Solana قادرة على تحقيق مثل هذا الإنتاجية المُرتفعة. تتزامن شبكات البلوكشاين التقليدية على أجزاء كبيرة من المُعاملات المُسَمَّاة بالكتل (blocks). عن طريق المُزامنة على الكتل (blocks)، لا يُمكن مُعالجة المُعاملة حتى تُمضي مُدة، تُسَمَّى "وقت الكتلة" (block time). في إطار إجماع إثبات العمل (Proof of Work consensus)، يجب أن تكون أوقات الكتل (block times) هذه كبيرة جدا \(أكثر من 10 دقائق\) لتقليل إحتمالات أن ينتج المُدقّقون (validators) كتلة (block) جديدة صالحة في نفس الوقت. لا يُوجد مثل هذا التقييد في إطار إجماع إثبات الحِصَّة أو التَّحْصِيص (Proof of Stake Consensus)، ولكن بدون أختام زمنية (Timestamps) موثوقة، لا يُمكن للمُدقّق (validator) أن يُحَدِّد ترتيب الكتل (blocks) الواردة إليه. الحل الشائع هو وضع علامة على كل كتلة (block) مع ساعة حائط الختم الزمني [wallclock timestamp](https://en.bitcoin.it/wiki/Block_timestamp). بسبب الإنحراف عن الساعة والتباين في أوقات إستجابة الشبكة (network latencies)، فإن الأختام الزمنية (Timestamps) ليست دقيقة إلا في غضون ساعة أو ساعتين. لحل هذه المُشكلة، تعمل هذه الأنظمة على إطالة أوقات الكتلة (block times) لتوفير يقين معقول بأن الختم الزمني المُتوسط (median timestamp) في كل كتلة (block) يتزايد دائما.

تتبع Solana نهجا مُختلفا جدا، تسميه دليل إثبات التاريخ _Proof of History_ أو _PoH_. تقوم العُقدة القائد (leader node) بوضع الختم الزمني ("timestamp") على الكتل (blocks) مع أدلة تشفير على مُضي بعض الوقت مُنذ آخر إثبات. جميع البيانات المُجزَّأة (hashed) في الدليل قد حدثت بالتأكيد قبل إنشاء الدليل. تقوم العُقدة (node) بعد ذلك بمُشاركة الكتلة (block) الجديدة مع عُقدة التدقيق (valdiator node) للتثبت من صِحَّة هذه الأدلة. الكتل (block) يُمكن أن تصل إلى المُدقّقين (validators) بأي ترتيب أو حتى يُمكن إعادة عرضها بعد سنوات من ذلك. مع ضمانات المُزامنة الموثوقة، تستطيع solana تقسيم الكتل (break blocks) إلى مجموعات أصغر من المُعاملات تُسَمَّى مُدخلات _entries_. يتم بث المُدخلات (entries) إلى المُدقّقين (validators) في الوقت الفعلي، أي قبل إجماع الكتلة (block consensus).

من الناحية الفنية لا تُرسل Solana قطّ كتلة _block_، ولكن يُستخدم المُصطلح لوصف تسلسل المُدخلات (entries) التي يُصَوِّت عليها المُدقّقون (validators) للحصول على تأكيد _confirmation_. يُمكن بهذه الطريقة مُقارنة أوقات تأكيد Solana مع بعضها البعض ومع النظم القائمة على الكتل (block-based systems). يُحَدِّد التنفيذ الحالي وقت الكتلة (block time) إلى 800 جزء من الثانية الواحدة (ms).

ما يحدث هو أن المُدخلات (entries) يتم بثها إلى المُدقّقين (validators) بمجرد أن تستطيع العُقدة القائد (leader node) إرسال مجموعة من المُعاملات الصحيحة إلى مُدخل (entry). يقوم المُدقّقون (validators) بمُعالجة تلك المُدخلات (entries) قبل وقت التصويت على صِّحَّتها. عن طريق مُعالجة المُعاملات على النحو الأمثل، لن يُوجد في الواقع أي تأخير بين وقت تلقي آخر مُدخل (entry) والوقت الذي يُمكن فيه للعُقدة (node) أن تُصَوِّت. في حالة ما إذا كان الإجماع (consensus) لم يتم **not** تحقيقه، تقوم العُقدة (node) ببساطة بإسترجاع حالتها (rolls back its state). تم إدخال تقنية المُعالجة المُتفائلة هذه في عام 1981 وإسمها تحكم التزامن المُتفائل [Optimistic Concurrency Control](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.65.4735). يُمكن تطبيقه على بنية البلوكشاين حيث تصَوِّت مجموعة (cluster) على تجزئة (hash) تمثل دفتر الأستاذ (ledger) الكامل حتى يصل إلى بعض إرتفاع الكتلة _block height_. يتم تنفيذه في Solana بطريقة بسيطة بإستخدام المُدخل (entry) الأخير لتجزئة (hash) الPoH.

## العلاقة مع دالّات التأخير التي يُمكن التَحَقُّق منها (Verifiable Delay Function أوVDF)

تم وصف تقنية إثبات التاريخ (Proof Of History) لأول مرة لإستخدامها في شبكة البلوكشاين من قبل Solana في نوفمبر 2017. في حزيران/ يونيو من السنة التالية، تم وصف تقنية مُماثلة في ستانفورد (Stanford) وإسمها دالّة التأخير التي يُمكن التَحَقُّق منها [verifiable delay function](https://eprint.iacr.org/2018/601.pdf) أو _VDF_.

تَتَمَثَّل إحدى الخصائص المرغوبة دالّة التأخير التي يُمكن التَحَقُّق منها (VDF) في أن وقت التَحَقُّق سريع جدا. النهج الذي تتبعه Solana في التَحَقُّق من خاصية التأخير يتناسب مع الوقت الذي إستغرقته لإنشائها. بعد تقسيمه على على 4000 وحدة مُعالجة الرسوميات (GPU)، أثبت أنه سريع بما فيه الكفاية لإحتياجات Solana، ولكن إذا سألت مُؤلفي الورقة المذكورة أعلاه، فقد يخبرونك، وحتمًا سيفعلون، \([and have](https://github.com/solana-labs/solana/issues/388)\ أن نهج Solana بطيء من الناحية الحسابية ولا ينبغي أن يُطلق عليه إسم VDF. نُجادل بأن مُصطلح VDF ينبغي أن يُمَثّل دالّات التأخير التي يُمكن التحقق منها وليس فقط المجموعة الفرعية ذات خصائص أداء مُعينة. إلى أن يتم حل هذه المشكلة، من المُرَجَّح أن تستمر Solana في إستخدام مُصطلح PoH في صندوق VDF الخاص بكل تطبيق.

هناك فرق آخر بين PoH وVDFs، وهو أن VDF تستخدم فقط لتتبع الفترات (tracking duration). من جهة أخرى، تتضمن سلسلة تجزئة الـ PoH، تجزئة أي بيانات لاحظها التطبيق. هذه البيانات سيف ذو حدين. فمن ناحية، "تثبت البيانات تاريخا" (proves history) - أي أن البيانات كانت موجودة بكل تأكيد قبل التجزئة التي بعدها. من الناحية الأخرى، فهذا يعني أن التطبيق يُمكنه مُعالجة سلسلة التجزئة (hash chain) عن طريق تغيير متى_when_ تمت تجزئة البيانات. لذلك فإن سلسلة PoH لا تُشكل مصدرا جيدا للعشوائية في حين أنه يُمكن أن تكون VDF مصدرا جيدا حتى بدون هذه البيانات. على سبيل المثال، خوارزمية تناوب القائد [leader rotation algorithm](synchronization.md#leader-rotation) مُشتقّ فقط من إرتفاع VDF _height_ وليس من تجزئته (hash) عند هذا الإرتفاع.

## العلاقة بآليات الإجماع (Relationship to Consensus Mechanisms)

إثبات التاريخ (Proof of History) ليس آلية إجماع (consensus mechanism)، ولكنه يُستخدم لتحسين أداء آلية إجماع إثبات الحِصَّة أو التَحْصِيص (Proof Of Staking). يستخدم أيضا لتحسين أداء بروتوكولات نُظم البيانات (data plane protocols).

## المزيد عن دليل إثبات التاريخ (Proof of History)

- [قياس الساعة المائية (water clock analogy)](https://medium.com/solana-labs/proof-of-history-explained-by-a-water-clock-e682183417b8)
- [نظرة عامة على إثبات التاريخ (Proof of History)](https://medium.com/solana-labs/proof-of-history-a-clock-for-blockchain-cf47a61a9274)
