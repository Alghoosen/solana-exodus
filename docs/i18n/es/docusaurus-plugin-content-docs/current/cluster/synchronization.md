---
title: Sincronización
---

La sincronización rápida y confiable es la mayor razón por la que Solana es capaz de lograr un rendimiento tan alto. Las blockchains tradicionales se sincronizan en grandes trozos de transacciones llamadas bloques. Al sincronizar en bloques, una transacción no puede ser procesada hasta que haya pasado una duración, llamada "tiempo de bloques". En el consenso Prueba de Trabajo, estos tiempos de bloque necesitan ser muy grandes \\(~10 minutos\\) para minimizar las probabilidades de múltiples validadores que producen un nuevo bloque válido al mismo tiempo. No hay tal restricción en el consenso Proof of Stake pero sin marcas de tiempo fiables, un validador no puede determinar el orden de los bloques entrantes. A solución popular es etiquetar cada bloque con una [wallclock timestamp](https://en.bitcoin.it/wiki/Block_timestamp). Debido a la desviación del reloj y a la variación de las latencias de la red, la marca de tiempo sólo tiene una precisión de una o dos horas. Para solucionar el problema, estos sistemas alargan los tiempos de los bloques para proporcionar una certeza razonable de que la mediana de la marca de tiempo de cada bloque es siempre creciente.

Solana adopta un enfoque muy diferente, que llama _Prueba de Historia_ o _PoH_. Los nodos líderes "timestamp" bloquean con pruebas criptográficas que ha pasado algún tiempo desde la última prueba. Todos los datos introducidos en la prueba sin duda se han producido antes de que se generara la prueba. El nodo entonces comparte el nuevo bloque con los nodos validadores, que son capaces de verificar esas pruebas. Los bloques pueden llegar a validadores en cualquier orden o incluso podrían repetirse años después. Con unas garantías de sincronización tan fiables, Solana es capaz de dividir bloques en lotes más pequeños de transacciones llamadas _entradas_. Las entradas se transmiten a los validadores en tiempo real, antes de cualquier noción de consenso de bloque.

Solana técnicamente nunca envía un _bloque_, sino que utiliza el término para describir la secuencia de entradas que los validadores votan para lograr la _confirmación_. De este modo, los tiempos de confirmación de Solana pueden compararse con los de los sistemas basados en bloques. La implementación actual fija el tiempo de bloque a 800ms.

Lo que ocurre bajo el capó es que las entradas se envían a los validadores tan rápido como un nodo líder puede agrupar un conjunto de transacciones válidas en una entrada. Los validadores procesan esas entradas mucho antes de que sea el momento de votar sobre su validez. Al procesar las transacciones de forma optimista, efectivamente no hay retraso entre el momento en que se recibe la última entrada y el momento en que el nodo puede votar. En caso de que el consenso sea **no** alcanzado, un nodo simplemente retrocede su estado. Esta técnica optimista de procesamiento fue introducida en 1981 y fue llamada [Optimistic Concurrency Control](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.65.4735). Puede aplicarse a la arquitectura de la cadena de bloques en la que un grupo vota un hash que representa el ledger completo hasta una _altura del bloque_. En Solana, se implementa trivialmente utilizando el hash PoH de la última entrada.

## Relación con VDFs

La técnica Prueba de Historia fue descrita por primera vez para su uso en blockchain por Solana en noviembre de 2017. En junio del año siguiente, se describió en Stanford una técnica similar denominada [función de retardo verificable](https://eprint.iacr.org/2018/601.pdf) o _VDF_.

Una propiedad deseable de un VDF es que el tiempo de verificación es muy rápido. El enfoque de Solana para verificar su función de retardo es proporcional al tiempo que se tardó en crearla. Dividir más de 4000 GPU, es lo suficientemente rápido para las necesidades de Solana, pero si se pregunta a los autores del documento citado arriba, pueden decirte \([y tener](https://github.com/solana-labs/solana/issues/388)\) que el enfoque de Solana es algoritmicamente lento y no debería llamarse VDF. Argumentamos que el término VDF debe representar la categoría de funciones de retraso verificable y no sólo el subconjunto con ciertas características de rendimiento. Hasta que esto se resuelva, Solana probablemente continuará utilizando el término PoH para su VDF específico de aplicación.

Otra diferencia entre PoH y VDFs es que un VDF se utiliza sólo para la duración del seguimiento. La cadena hash de PoH, por otra parte, incluye hash de los datos observados por la aplicación. Estos datos son una espada de doble filo. Por un lado, los datos "prueba la historia" - que los datos sin duda existían antes de los haskeys después. Por el otro lado, significa que la aplicación puede manipular la cadena hash cambiando _cuando_ los datos son hashed. La cadena PoH por lo tanto no sirve como una buena fuente de aleatoria, mientras que un VDF sin esos datos podría. El algoritmo de rotación de [líder de Solana](synchronization.md#leader-rotation), por ejemplo, se deriva sólo del VDF _altura_ y no de su hash a esa altura.

## Relación con el mecanismo del consenso

Prueba de Historia no es un mecanismo de consenso, pero se utiliza para mejorar el desempeño del consenso Prueba de Stake. También se utiliza para mejorar el rendimiento de los protocolos del plano de datos.

## Más sobre Prueba de Historia

- [reloj de agua analógico](https://medium.com/solana-labs/proof-of-history-explained-by-a-water-clock-e682183417b8)
- [Resumen de Prueba de Historia](https://medium.com/solana-labs/proof-of-history-a-clock-for-blockchain-cf47a61a9274)
