steps:
  - command: "system-test/testnet-automation.sh"
    label: "GCE - 8 hour Stability - 5 Node"
    env:
      UPLOAD_RESULTS_TO_SLACK: "true"
      CLOUD_PROVIDER: "gce"
      TESTNET_TAG: "gce-stability"
      TEST_DURATION_SECONDS: 28800
      NUMBER_OF_VALIDATOR_NODES: 5
      ENABLE_GPU: "false"
      VALIDATOR_NODE_MACHINE_TYPE: "--machine-type n1-standard-16"
      NUMBER_OF_CLIENT_NODES: 0
      TESTNET_ZONES: "us-west1-a,us-west1-b,us-central1-a,europe-west4-a"
      USE_PUBLIC_IP_ADDRESSES: "true"
      ADDITIONAL_FLAGS: "--dedicated"
      #let's repurpose our 8-hours-long stability test? or create a new one?
      #first https://github.com/solana-labs/solana/pull/8510 needs to land!
      CUSTOM_SCRIPT: "/path/to/script.sh"
      #basically contains like this: "bash -c (while ./target/release/solana ping --interval 0 --count 1 --lamports 10000; do sleep 0.1; done)"
    agents:
      - "queue=stability-deploy"
